webpackJsonp([0],{"+qiH":function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.element-move[data-v-a5192472] {\n  border: 1px dotted rgba(108,207,255,0.3) !important;\n}\n.element-hover[data-v-a5192472] {\n  position: absolute;\n  border: 1px solid #6ccfff;\n  cursor: move;\n}\n.element-hover .block[data-v-a5192472] {\n  width: 100%;\n  height: 100%;\n}\n",""])},"/7HJ":function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.element[data-v-b89b0e8a] {\n  opacity: 1;\n  white-space: normal;\n  word-wrap: break-word;\n}\n",""])},"25O9":function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.text-editor[data-v-6df30de1] {\n  z-index: 100001;\n  position: absolute;\n}\n.text-editor .compute-block[data-v-6df30de1] {\n  outline: none;\n  width: 100%;\n  height: 100%;\n  user-select: text;\n  cursor: text;\n  width: 100%;\n  height: auto;\n}\n",""])},"4Xfu":function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.image-element[data-v-129f2030] {\n  opacity: 1;\n  overflow: hidden;\n}\n.image-element img[data-v-129f2030] {\n  display: block;\n  width: 100%;\n}\n",""])},"5Yx1":function(e,t,n){var o=n("4Xfu");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("513189e2",o,!1)},"7cjd":function(e,t,n){var o=n("/7HJ");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("9046a75a",o,!1)},JQtj:function(e,t,n){var o=n("+qiH");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("7282c25a",o,!1)},OpUL:function(e,t,n){var o=n("T6jK");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("7a78c650",o,!1)},T6jK:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.operate-move[data-v-b2acbd66] {\n  border: 1px dotted rgba(108,207,255,0.3);\n}\n.operate-active[data-v-b2acbd66] {\n  border: 2px dotted #6ccfff;\n}\n.operate[data-v-b2acbd66] {\n  white-space: normal;\n  word-wrap: break-word;\n  z-index: 100000 !important;\n  box-sizing: border-box;\n  transform-origin: center center;\n  opacity: 1;\n  cursor: move;\n}\n.operate .rotate-btn[data-v-b2acbd66] {\n  position: absolute;\n  bottom: -30px;\n  left: 50%;\n  width: 20px;\n  height: 20px;\n  margin-left: -10px;\n  cursor: default;\n  border-radius: 50%;\n  z-index: 10000;\n}\n.operate .rotate-btn .rotate-icon[data-v-b2acbd66] {\n  background: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='25' height='24' xmlns='http://www.w3.org/2000/svg' fill='%23757575'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Ccircle stroke='%23CCD1DA' fill='%23FFF' cx='13' cy='12' r='11.5'/%3E%3Cpath d='M16.242 12.012a4.25 4.25 0 00-5.944-4.158L9.696 6.48a5.75 5.75 0 018.048 5.532h1.263l-2.01 3.002-2.008-3.002h1.253zm-8.484-.004a4.25 4.25 0 005.943 3.638l.6 1.375a5.75 5.75 0 01-8.046-5.013H5.023L7.02 9.004l1.997 3.004h-1.26z' fill='%23000' fill-rule='nonzero'/%3E%3C/g%3E%3C/svg%3E\") no-repeat center center;\n  width: 20px;\n  height: 20px;\n  position: relative;\n  background-size: 100% 100%;\n}\n.operate .rotate-btn .rotate-icon span[data-v-b2acbd66] {\n  font-weight: 400;\n  font-style: normal;\n  position: absolute;\n  width: 28px;\n  top: 40px;\n  text-align: center;\n  left: calc(50% - 24px);\n  transform: translateX(-calc(26%));\n  height: 28px;\n  line-height: 28px;\n  padding: 0 8px;\n  font-size: 12px;\n  background: #0e1217;\n  border-radius: 4px;\n  color: #fff;\n}\n.operate .dot[data-v-b2acbd66] {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  background-color: unset;\n  border: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.operate .dot.dot-sw[data-v-b2acbd66]:before,\n.operate .dot.dot-se[data-v-b2acbd66]:before,\n.operate .dot.dot-nw[data-v-b2acbd66]:before,\n.operate .dot.dot-ne[data-v-b2acbd66]:before {\n  content: ' ';\n  display: block;\n  width: 8px;\n  height: 8px;\n  border-radius: 6px;\n  background-color: #fff;\n  border: 1px solid rgba(42,134,255,0.4);\n}\n.operate .dot-se[data-v-b2acbd66] {\n  top: -11px;\n  left: -11px;\n}\n.operate .dot-sw[data-v-b2acbd66] {\n  top: -11px;\n  right: -11px;\n}\n.operate .dot-ne[data-v-b2acbd66] {\n  bottom: -11px;\n  left: -11px;\n}\n.operate .dot-nw[data-v-b2acbd66] {\n  bottom: -11px;\n  right: -11px;\n}\n.operate .dot-s[data-v-b2acbd66]:before,\n.operate .dot-n[data-v-b2acbd66]:before,\n.operate .dot-e[data-v-b2acbd66]:before,\n.operate .dot-w[data-v-b2acbd66]:before {\n  content: ' ';\n  display: block;\n  border-radius: 6px;\n  background-color: #fff;\n  border: 1px solid rgba(42,134,255,0.4);\n}\n.operate .dot-s[data-v-b2acbd66]:before,\n.operate .dot-n[data-v-b2acbd66]:before {\n  width: 12px;\n  height: 6px;\n}\n.operate .dot-e[data-v-b2acbd66]:before,\n.operate .dot-w[data-v-b2acbd66]:before {\n  width: 6px;\n  height: 12px;\n}\n.operate .dot-s[data-v-b2acbd66] {\n  left: 50%;\n  top: -11px;\n  margin-left: -11px;\n}\n.operate .dot-w[data-v-b2acbd66] {\n  top: 50%;\n  right: -11px;\n  margin-top: -11px;\n}\n.operate .dot-n[data-v-b2acbd66] {\n  bottom: -11px;\n  left: 50%;\n  margin-left: -11px;\n}\n.operate .dot-e[data-v-b2acbd66] {\n  top: 50%;\n  left: -11px;\n  margin-top: -11px;\n}\n.operate .scale-nw[data-v-b2acbd66] {\n  cursor: se-resize;\n}\n.operate .scale-n[data-v-b2acbd66] {\n  cursor: s-resize;\n}\n.operate .scale-ne[data-v-b2acbd66] {\n  cursor: sw-resize;\n}\n.operate .scale-e[data-v-b2acbd66] {\n  cursor: w-resize;\n}\n.operate .scale-se[data-v-b2acbd66] {\n  cursor: nw-resize;\n}\n.operate .scale-s[data-v-b2acbd66] {\n  cursor: n-resize;\n}\n.operate .scale-w[data-v-b2acbd66] {\n  cursor: e-resize;\n}\n.operate .scale-sw[data-v-b2acbd66] {\n  cursor: ne-resize;\n}\n",""])},Yh2q:function(e,t,n){var o=n("cty0");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("7b3aca60",o,!1)},cty0:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.h5-editor[data-v-32e386a0] {\n  position: relative;\n  padding-top: 50px;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  border: 1px solid #ccc;\n  background-color: #f0f3f4;\n}\n.h5-editor .opreate-block[data-v-32e386a0] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 50px;\n  width: 100%;\n  box-shadow: 1px 1px 2px #ccc;\n}\n.h5-editor .statistics[data-v-32e386a0] {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n}\n",""])},jU0Y:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,'\n.img-editor[data-v-2b4fa079] {\n  position: fixed;\n  top: 51px;\n  left: 61px;\n  right: 0;\n  bottom: 0;\n  z-index: 100002;\n}\n.img-editor .cover-area[data-v-2b4fa079] {\n  pointer-events: none;\n}\n.img-editor .cover-area .cover-img-block[data-v-2b4fa079] {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.img-editor .cover-area .cropper-cropbox-line[data-v-2b4fa079] {\n  background-color: #6ccfff;\n  position: absolute;\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n.img-editor .cover-area .line-e[data-v-2b4fa079] {\n  top: 0;\n  left: -3px;\n  width: 3px;\n  cursor: w-resize;\n  pointer-events: auto;\n}\n.img-editor .cover-area .line-n[data-v-2b4fa079] {\n  bottom: -3px;\n  left: 0;\n  height: 3px;\n  cursor: s-resize;\n  pointer-events: auto;\n}\n.img-editor .cover-area .line-w[data-v-2b4fa079] {\n  top: 0;\n  right: -3px;\n  width: 3px;\n  cursor: e-resize;\n  pointer-events: auto;\n}\n.img-editor .cover-area .line-s[data-v-2b4fa079] {\n  top: -3px;\n  left: 0;\n  height: 3px;\n  cursor: n-resize;\n  pointer-events: auto;\n}\n.img-editor .cover-area .cropper-cropbox-point[data-v-2b4fa079] {\n  width: 13px !important;\n  height: 13px !important;\n  opacity: 1;\n  background-color: transparent;\n  position: absolute;\n  display: block;\n  pointer-events: auto;\n}\n.img-editor .cover-area .cropper-cropbox-point[data-v-2b4fa079]:before {\n  content: "";\n  position: absolute;\n  background-color: #fff;\n}\n.img-editor .cover-area .cropper-cropbox-point[data-v-2b4fa079]:after {\n  content: "";\n  position: absolute;\n  background-color: #fff;\n}\n.img-editor .cover-area .point-sw[data-v-2b4fa079] {\n  top: -4px;\n  right: -4px;\n  border-radius: 3px 2px 3px 2px;\n  cursor: ne-resize;\n}\n.img-editor .cover-area .point-sw[data-v-2b4fa079]:before {\n  width: 13px;\n  height: 4px;\n  border-radius: 4px 3px 0px 0px;\n}\n.img-editor .cover-area .point-sw[data-v-2b4fa079]:after {\n  width: 4px;\n  height: 13px;\n  right: 0px;\n  border-radius: 0px 3px 4px 0px;\n}\n.img-editor .cover-area .point-se[data-v-2b4fa079] {\n  top: -4px;\n  left: -4px;\n  border-radius: 2px 3px 3px;\n  cursor: nw-resize;\n}\n.img-editor .cover-area .point-se[data-v-2b4fa079]:before {\n  width: 4px;\n  height: 13px;\n  border-radius: 3px 0px 0px 4px;\n}\n.img-editor .cover-area .point-se[data-v-2b4fa079]:after {\n  width: 13px;\n  height: 4px;\n  border-radius: 3px 4px 0px 0px;\n  top: 0px;\n}\n.img-editor .cover-area .point-ne[data-v-2b4fa079] {\n  bottom: -4px;\n  left: -4px;\n  border-radius: 3px 3px 3px 2px;\n  cursor: sw-resize;\n}\n.img-editor .cover-area .point-ne[data-v-2b4fa079]:before {\n  width: 4px;\n  height: 13px;\n  border-radius: 4px 0px 0px 3px;\n}\n.img-editor .cover-area .point-ne[data-v-2b4fa079]:after {\n  height: 4px;\n  width: 13px;\n  border-radius: 0px 0px 4px 3px;\n  bottom: 0px;\n}\n.img-editor .cover-area .point-nw[data-v-2b4fa079] {\n  right: -4px;\n  bottom: -4px;\n  cursor: se-resize;\n  border-radius: 3px 3px 2px 3px;\n}\n.img-editor .cover-area .point-nw[data-v-2b4fa079]:before {\n  content: " ";\n  width: 4px;\n  height: 13px;\n  border-radius: 0px 4px 3px 0px;\n  right: 0px;\n}\n.img-editor .cover-area .point-nw[data-v-2b4fa079]:after {\n  content: " ";\n  width: 13px;\n  height: 4px;\n  border-radius: 0px 0px 3px 4px;\n  bottom: 0px;\n}\n.img-editor .operate-area[data-v-2b4fa079] {\n  pointer-events: auto;\n  cursor: move;\n}\n.img-editor .operate-area .operate-area-img[data-v-2b4fa079] {\n  outline: 3px dashed rgba(0,0,0,0.4);\n}\n.img-editor .dot-mask[data-v-2b4fa079] {\n  pointer-events: none;\n}\n.img-editor .dot-mask .dot-mask-container .dot[data-v-2b4fa079] {\n  pointer-events: auto;\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  background-color: unset;\n  border: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.img-editor .dot-mask .dot-mask-container .dot.dot-sw[data-v-2b4fa079]:before,\n.img-editor .dot-mask .dot-mask-container .dot.dot-se[data-v-2b4fa079]:before,\n.img-editor .dot-mask .dot-mask-container .dot.dot-nw[data-v-2b4fa079]:before,\n.img-editor .dot-mask .dot-mask-container .dot.dot-ne[data-v-2b4fa079]:before {\n  content: \' \';\n  display: block;\n  width: 8px;\n  height: 8px;\n  border-radius: 6px;\n  background-color: #fff;\n  border: 1px solid rgba(42,134,255,0.4);\n}\n.img-editor .dot-mask .dot-mask-container .dot-se[data-v-2b4fa079] {\n  top: -11px;\n  left: -11px;\n}\n.img-editor .dot-mask .dot-mask-container .dot-sw[data-v-2b4fa079] {\n  top: -11px;\n  right: -11px;\n}\n.img-editor .dot-mask .dot-mask-container .dot-ne[data-v-2b4fa079] {\n  bottom: -11px;\n  left: -11px;\n}\n.img-editor .dot-mask .dot-mask-container .dot-nw[data-v-2b4fa079] {\n  bottom: -11px;\n  right: -11px;\n}\n.img-editor .dot-mask .dot-mask-container .scale-nw[data-v-2b4fa079] {\n  cursor: nwse-resize;\n}\n.img-editor .dot-mask .dot-mask-container .scale-ne[data-v-2b4fa079] {\n  cursor: nesw-resize;\n}\n.img-editor .dot-mask .dot-mask-container .scale-se[data-v-2b4fa079] {\n  cursor: nwse-resize;\n}\n.img-editor .dot-mask .dot-mask-container .scale-sw[data-v-2b4fa079] {\n  cursor: nesw-resize;\n}\n.img-editor .bg-mask[data-v-2b4fa079] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 10000;\n  background-color: rgba(0,0,0,0.4);\n  pointer-events: none;\n}\n',""])},wHN4:function(e,t,n){var o=n("25O9");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("e700db52",o,!1)},"wYP+":function(e,t,n){var o=n("jU0Y");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("acc8adaa",o,!1)},xor1:function(e,t,n){"use strict";function o(e){w||n("7cjd")}function r(e){j||n("5Yx1")}function a(e){J||n("OpUL")}function i(e){ie||n("JQtj")}function s(e){ue||n("wHN4")}function l(e){Me||n("wYP+")}function c(e){Ve||n("Yh2q")}Object.defineProperty(t,"__esModule",{value:!0});var m=n("Dd8w"),d=n.n(m),h=n("bOdI"),p=n.n(h),v=n("woOf"),g=n.n(v),u=n("NYxO"),f={name:"MakaElement",props:{elementData:{type:Object,default:function(){}}},data:function(){return{}},computed:d()({},Object(u.b)(["isMove","isRotate","isEditor"]),Object(u.c)({hoverElementId:function(e){return e.element.hoverElementId},selectElementId:function(e){return e.element.selectElementId}}),{elementStyle:function(){return this.elementData&&this.elementData.style?this.elementData.style:void 0},showelement:function(){return!this.isEditor||this.elementData.elementId!=this.selectElementId}}),mounted:function(){},methods:{selectElement:function(e){e.stopPropagation(),this.elementData.elementId&&this.$store.dispatch("setElementId",this.elementData.elementId)},onmouseover:function(e){e.stopPropagation(),!this.elementData.elementId||this.isMove||this.isRotate||this.selectElementId==this.elementData.elementId||this.$store.dispatch("setHoverElementId",this.elementData.elementId)}}},x=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:e.showelement,expression:"showelement"}],staticClass:"element",class:[e.selectElementId==e.elementData.elementId||e.isEditor?"":"no-user-select"],style:e.elementStyle,on:{click:e.selectElement,mouseover:e.onmouseover}},[e._v(e._s(e.elementData.text))])},y=[];x._withStripped=!0;var I={render:x,staticRenderFns:y},b=I,w=!1,E=n("VU/8"),S=o,D=E(f,b,!1,S,"data-v-b89b0e8a",null);D.options.__file="src/views/h5Editor/components/MakaElement.vue",D.esModule&&Object.keys(D.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var M=D.exports,k={name:"ImageElement",props:{elementData:{type:Object,default:function(){}}},data:function(){return{}},computed:d()({},Object(u.b)(["isMove","isRotate","isEditor"]),Object(u.c)({hoverElementId:function(e){return e.hoverElementId},selectElementId:function(e){return e.element.selectElementId}}),{elementStyle:function(){return this.elementData&&this.elementData.style?this.elementData.style:void 0},imgStyle:function(){var e=this.elementData.coverImg||{};return{width:e.width,height:e.height,transform:"translate("+e.x+", "+e.y+")"}},showelement:function(){return!this.isEditor||this.elementData.elementId!=this.selectElementId}}),mounted:function(){},methods:{selectElement:function(e){e.stopPropagation(),this.elementData.elementId&&this.$store.dispatch("setElementId",this.elementData.elementId)},onmouseover:function(e){e.stopPropagation(),!this.elementData.elementId||this.isMove||this.isRotate||this.selectElementId==this.elementData.elementId||this.$store.dispatch("setHoverElementId",this.elementData.elementId)}}},F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showelement,expression:"showelement"}],staticClass:"image-element",class:[e.selectElementId!=e.elementData.elementId?"no-user-select":""],style:e.elementStyle,on:{click:e.selectElement,mouseover:e.onmouseover}},[n("img",{style:e.imgStyle,attrs:{src:e.elementData.imgSrc}})])},C=[];F._withStripped=!0;var _={render:F,staticRenderFns:C},$=_,j=!1,O=n("VU/8"),P=r,L=O(k,$,!1,P,"data-v-129f2030",null);L.options.__file="src/views/h5Editor/components/ImageElement.vue",L.esModule&&Object.keys(L.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var H=L.exports,z={x:0,y:-1},V={n:{x:0,y:1,angle:180},ne:{x:1,y:1,angle:225},e:{x:1,y:0,angle:270},se:{x:1,y:-1,angle:315},s:{x:0,y:-1,angle:0},sw:{x:-1,y:-1,angle:45},w:{x:-1,y:0,angle:90},nw:{x:-1,y:1,angle:135}},R=function(e,t){var n=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.sqrt(t.x*t.x+t.y*t.y);if(0===n||0===o)return console.warn(e,t,"向量长度为0"),180;var r=(e.x*t.x+e.y*t.y)/n/o;return parseFloat(Math.acos(r)/Math.PI*180)},A=function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(t=t<0?-t:t),Math.cos(t*Math.PI/180)*Math.sqrt(e.x*e.x+e.y*e.y)},Z=function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(t=t<0?-t:t),Math.sin(t*Math.PI/180)*Math.sqrt(e.x*e.x+e.y*e.y)},W=function(e,t){var n=t*Math.PI/180;return{x:e.y*Math.sin(n)+e.x*Math.cos(n),y:e.y*Math.cos(n)-e.x*Math.sin(n)}},N=function(e,t,n,o){var r=void 0,a=function e(t,o){!r&&t&&(r=t);var a=t?t-r:0;n&&n(o),a<150&&window.requestAnimationFrame(function(t){return e(t,o)})};e?e.setCapture?e.onmousedown=function(r){return t&&t(r),e.onmousemove=function(e){window.requestAnimationFrame?window.requestAnimationFrame(function(t){return a(t,e)}):n&&n(e)},e.onmouseup=function(t){o&&o(t),e.releaseCapture()},e.setCapture(),!1}:e.onmousedown=function(e){return t&&t(e),document.onmousemove=function(e){window.requestAnimationFrame?a(void 0,e):n&&n(e)},document.onmouseup=function(e){o&&o(e),document.onmousemove=null,document.onmouseup=null},!1}:console.warn("please delivery really parameter(element) to be use bindMove function")},Y=n("oFuF"),B={name:"Operate",directives:{direction:{bind:function(e,t,n){var o=n.context,r={direction:"",element:{minWidth:14,minHeight:14,width:0,height:0,originWidth:0,originHeight:0,top:0,left:0,fontSize:0,lineHeight:0},coverImg:{x:0,y:0,width:0,height:0},center:{},startPoint:{x:0,y:0}};N(e,function(t){t.stopPropagation(),o.$store.dispatch("setElementListItemCapture",{type:"editor",element:o.selectElementData,vuexCaptureMark:"start"});var n=o.elementStyle&&o.elementStyle.width&&parseFloat(o.elementStyle.width),a=o.elementStyle&&o.elementStyle.height&&parseFloat(o.elementStyle.height);o.resetDirectionVectors(n,a);var i=e.classList[2];r.direction=i.replace("dot-",""),r.element.width=o.elementStyle&&o.elementStyle.width?parseFloat(o.elementStyle.width):0,r.element.height=o.elementStyle&&o.elementStyle.height?parseFloat(o.elementStyle.height):0,r.element.originWidth=o.elementStyle&&o.elementStyle.originWidth?parseFloat(o.elementStyle.originWidth):0,r.element.originHeight=o.elementStyle&&o.elementStyle.originHeight?parseFloat(o.elementStyle.originHeight):0,r.element.left=o.elementStyle&&o.elementStyle.left?parseFloat(o.elementStyle.left):0,r.element.top=o.elementStyle&&o.elementStyle.top?parseFloat(o.elementStyle.top):0,r.coverImg.width=o.selectElementData.coverImg&&o.selectElementData.coverImg.width?parseFloat(o.selectElementData.coverImg.width):0,r.coverImg.height=o.selectElementData.coverImg&&o.selectElementData.coverImg.height?parseFloat(o.selectElementData.coverImg.height):0,r.coverImg.x=o.selectElementData.coverImg&&o.selectElementData.coverImg.x?parseFloat(o.selectElementData.coverImg.x):0,r.coverImg.y=o.selectElementData.coverImg&&o.selectElementData.coverImg.y?parseFloat(o.selectElementData.coverImg.y):0,r.element.fontSize=o.elementStyle&&o.elementStyle.fontSize?parseFloat(o.elementStyle.fontSize):0,r.element.lineHeight=o.elementStyle&&o.elementStyle.lineHeight?parseFloat(o.elementStyle.lineHeight):0,r.startPoint.x=t.clientX,r.startPoint.y=t.clientY,r.center=g()({},o.centerSpotPositon)},function(e){e.stopPropagation();var t=null,n=null,a="",i=void 0,s=void 0,l="",c="",m="",d=void 0,h=void 0,p=r.direction,v=p,u=o.elementStyle&&o.elementStyle.transform?o.elementStyle.transform:"",f=u.match(/rotateZ\((\S*)deg\)/)?u.match(/rotateZ\((\S*)deg\)/)[1]:0,x=parseFloat(f),y=e.clientX-r.startPoint.x,I=r.startPoint.y-e.clientY,b=R(o.directionVectors.n,{x:y,y:I}),w=r.element.width,E=r.element.height;y<0&&(b=360-b);var S=(x+o.directionVectors[p].angle)%360;switch(a=b-S,l=A({x:y,y:I},a),p){case"n":case"s":v=p+"e";break;case"w":case"e":v="n"+p}i=(x+o.directionVectors[v[1]].angle)%360,i=S-i,m=l*Math.cos(i*Math.PI/180),s=(x+o.directionVectors[v[0]].angle)%360,s=S-s,c=l*Math.cos(s*Math.PI/180),d=S-90,d=l*Math.cos(d*Math.PI/180),h=S-180,h=l*Math.cos(h*Math.PI/180),t={x:r.center.x+d/2,y:r.center.y+h/2};var D=r.element.width/r.element.height;w+=m,E+=c,w<=r.element.minWidth&&(w=r.element.minWidth,2==p.length&&(E=r.element.minWidth/D)),E<=r.element.minHeight&&(E=r.element.minHeight,2==p.length&&(w=r.element.minHeight*D));var M=o.selectElementData.style;M=g()(M,{height:E+"px",width:w+"px"});var k=g()({},o.selectElementData.coverImg||{}),F=o.selectElementData.type;if("text-element"==F){if(2==p.length){var C=r.element.lineHeight,_=parseFloat(r.element.fontSize),$=C*_,j=r.element.height/$,O=E/j/C;O<12&&(O=12,E=O*C*j,w=D*E),M.fontSize=O+"px",M.width=w+"px",M.height=E+"px"}}else if("image-element"==F){var P=r.element.originWidth/r.element.originHeight,L=void 0,H=void 0,z=void 0,V=void 0;p&&(L=r.coverImg.width,H=r.coverImg.height,z=r.coverImg.x,V=r.coverImg.y,"e"==p?w<=r.element.width+Math.abs(r.coverImg.x)?z=r.coverImg.x+w-r.element.width:(L=r.coverImg.width+w-r.element.width-Math.abs(r.coverImg.x),H=L/P,z=0,V=r.coverImg.y/r.coverImg.height*H):"n"==p?E>r.coverImg.height-Math.abs(r.coverImg.y)&&(H=E+Math.abs(r.coverImg.y),L=H*P,z=r.coverImg.x/r.coverImg.width*L):"w"==p?w>r.coverImg.width-Math.abs(r.coverImg.x)&&(L=w+Math.abs(r.coverImg.x),H=L/P,V=r.coverImg.y/r.coverImg.height*H):"s"==p?E>r.element.height+Math.abs(r.coverImg.y)?(H=E+r.coverImg.height-r.element.height-Math.abs(r.coverImg.y),L=H*P,z=r.coverImg.x/r.coverImg.width*L,V=0):V=r.coverImg.y+E-r.element.height:(L=w/r.element.width*r.coverImg.width,H=E/r.element.height*r.coverImg.height,z=r.coverImg.x/r.coverImg.width*L,V=r.coverImg.y/r.coverImg.height*H),k.width=L+"px",k.height=H+"px",k.x=z+"px",k.y=V+"px")}n={x:r.element.left+w/2+50,y:r.element.top+E/2+60},w>r.element.minWidth&&E>r.element.minHeight&&(t.x!=n.x&&(M.left=t.x-parseFloat(w)/2-60+"px"),t.y!=n.y&&(M.top=t.y-parseFloat(E)/2-50+"px")),o.$store.dispatch("setElementListItemCapture",{type:"editor",element:g()(o.selectElementData,{style:M,coverImg:k})})},function(e){e.stopPropagation(),o.$store.dispatch("setElementListItemCapture",{type:"editor",element:o.selectElementData,vuexCaptureMark:"end"})})}}},props:{},data:function(){return{directionVectors:V,position:["dot-nw","dot-n","dot-ne","dot-e","dot-se","dot-s","dot-sw","dot-w"]}},computed:d()({},Object(u.b)(["isMove","isRotate","isEditor"]),Object(u.c)({selectElementId:function(e){return e.element.selectElementId},hoverElementId:function(e){return e.hoverElementId},elementList:function(e){return e.element.elementList},selectElementData:function(){var e=this;return this.elementList.find(function(t){return t.elementId==e.selectElementId})||{}}}),{showOperate:function(){if(this.selectElementId)return!this.isEditor||"text-element"==this.selectElementData.type},elementStyle:function(){return this.selectElementData&&this.selectElementData.style?this.selectElementData.style:void 0},operateStyle:function(){var e=this.elementStyle||{},t=0,n=parseFloat(e.width),o=parseFloat(e.height),r=parseFloat(e.top),a=parseFloat(e.left);return!this.selectElementId||this.isMove||this.isRotate?this.isMove&&(t=1):t=2,n+=2*t,o+=2*t,r-=t,a-=t,g()({},e,{width:n+"px",height:o+"px",top:r+"px",left:a+"px",opacity:1})},showRotateBtn:function(){return!this.isMove&&(!!this.isRotate||(!this.isMove&&!this.isRotate&&this.selectElementId!=this.hoverElementId||(this.selectElementId,this.hoverElementId,!1)))},rotateDeg:function(){var e=this.elementStyle&&this.elementStyle.transform?this.elementStyle.transform:"",t=e.match(/rotateZ\((\S*)deg\)/)?e.match(/rotateZ\((\S*)deg\)/)[1]:0;return parseFloat(t)?Math.ceil(parseFloat(t)):0},showDotBtn:function(){return!this.isMove&&(!this.isRotate&&(!this.isMove&&!this.isRotate&&this.selectElementId!=this.hoverElementId||(this.selectElementId,this.hoverElementId,!1)))},centerSpotPositon:function(){var e=void 0,t=void 0;if(this.elementStyle){var n=parseFloat(this.elementStyle.top)+50,o=parseFloat(this.elementStyle.left)+60,r=parseFloat(this.elementStyle.width),a=parseFloat(this.elementStyle.height);e=o+r/2,t=n+a/2}return{x:e,y:t}}}),mounted:function(){this.initMoveEffect(),this.initRotateEffect()},methods:{getDirection:function(e,t){t=t||0;for(var n=["scale-nw","scale-n","scale-ne","scale-e","scale-se","scale-s","scale-sw","scale-w"],o=Math.floor((t+22.5)/45),r=0;r<o;r+=1)n.push(n.shift());return n[e]},resetDirectionVectors:function(e,t){var n=Math.atan(e/t)/Math.PI*180;this.directionVectors.ne.angle=0+n,this.directionVectors.se.angle=180-n,this.directionVectors.sw.angle=180+n,this.directionVectors.nw.angle=360-n},initRotateEffect:function(){var e=this,t=this.$refs.rotate_btn;this.$nextTick(function(){N(t,function(t){e.$store.dispatch("setIsRotate",!0),t.stopPropagation(),e.$store.dispatch("setElementListItemCapture",{type:"editor",element:e.selectElementData,vuexCaptureMark:"start"})},function(t){var n=t.clientX-e.centerSpotPositon.x,o=e.centerSpotPositon.y-t.clientY,r=R(z,{x:n,y:o});n>0&&(r=360-r),r>=180&&(r-=360);var a=e.selectElementData.style||{};a=g()(a,{rotate:r,transform:"rotateZ("+(360==r?0:r)+"deg)"}),e.$store.dispatch("setElementListItemCapture",{type:"editor",element:g()(e.selectElementData,{style:a})})},function(t){var n=e.elementStyle&&e.elementStyle.transform?e.elementStyle.transform:"",o=n.match(/rotateZ\((\S*)deg\)/)?n.match(/rotateZ\((\S*)deg\)/)[1]:0;o=Math.ceil(o);var r=e.selectElementData.style||{};r=g()(r,{rotate:o,transform:"rotateZ("+(360==o?0:o)+"deg)"}),e.$store.dispatch("setIsRotate",!1),e.$store.dispatch("setElementListItemCapture",{type:"editor",element:g()(e.selectElementData,{style:r}),vuexCaptureMark:"end"})})})},initMoveEffect:function(){var e=0,t=0,n=0,o=this;this.$nextTick(function(){var r=o.$el;N(r,function(a){o.isEditor||(n++,Object(Y.a)(function(){1==n?(o.$store.dispatch("setIsMove",!0),n=0):n>1&&(n=0)},100),e=a.clientX-r.offsetLeft,t=a.clientY-r.offsetTop,o.$store.dispatch("setElementListItemCapture",{type:"editor",element:o.selectElementData,vuexCaptureMark:"start"}))},function(n){if(!o.isEditor){var r=n.clientX-e,a=n.clientY-t,i=o.selectElementData.style;i=g()(i,{left:r+"px",top:a+"px"}),o.$store.dispatch("setElementListItemCapture",{type:"editor",element:g()(o.selectElementData,{style:i})})}},function(e){o.isEditor||(o.$store.dispatch("setIsMove",!1),1==n&&Object(Y.a)(function(){o.$store.dispatch("setIsMove",!1)},100),o.$store.dispatch("setElementListItemCapture",{type:"editor",element:o.selectElementData,vuexCaptureMark:"end"}))})})},ondblclick:function(){self.isEditor||this.$store.dispatch("setIsEditor",!0)}}},T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showOperate,expression:"showOperate"}],staticClass:"operate",class:[!e.selectElementId||e.isMove||e.isRotate?e.isMove?"operate-move":"":"operate-active"],style:e.operateStyle,on:{dblclick:e.ondblclick}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showRotateBtn,expression:"showRotateBtn"}],ref:"rotate_btn",staticClass:"rotate-btn"},[n("div",{staticClass:"rotate-icon"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.isRotate,expression:"isRotate"}],staticClass:"no-user-select",style:{transform:"rotateZ("+-e.rotateDeg+"deg)"}},[e._v(e._s(e.rotateDeg)+"°")])])]),e._l(e.position,function(t,o){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showDotBtn,expression:"showDotBtn"},{name:"direction",rawName:"v-direction",value:!0,expression:"true"}],key:o,staticClass:"dot",class:[e.getDirection(o,e.elementStyle&&e.elementStyle.rotate),t]})})],2)},X=[];T._withStripped=!0;var q={render:T,staticRenderFns:X},U=q,J=!1,K=n("VU/8"),Q=a,G=K(B,U,!1,Q,"data-v-b2acbd66",null);G.options.__file="src/components/operate.vue",G.esModule&&Object.keys(G.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var ee=G.exports,te={name:"ElementHover",props:{},data:function(){return{}},computed:d()({},Object(u.b)(["isMove","isEditor"]),Object(u.c)({hoverElementId:function(e){return e.hoverElementId},elementList:function(e){return e.element.elementList},hoverElementIdData:function(){var e=this;return this.elementList.find(function(t){return t.elementId==e.hoverElementId})||{}}}),{elementHoverStyle:function(){var e=this.elementStyle||{},t=parseFloat(e.top),n=parseFloat(e.left);return t-=1,n-=1,g()({},e,{top:t+"px",left:n+"px"})},elementStyle:function(){return this.hoverElementIdData&&this.hoverElementIdData.style?this.hoverElementIdData.style:{}}}),mounted:function(){this.initMoveEffect()},methods:{blockmouseout:function(){this.isMove||this.$store.dispatch("setHoverElementId","")},ondblclick:function(e){e.stopPropagation()},initMoveEffect:function(){var e=0,t=0,n=this;this.$nextTick(function(){var o=n.$el;N(o,function(r){n.$store.dispatch("setIsMove",!0),e=r.clientX-o.offsetLeft,t=r.clientY-o.offsetTop,n.$store.dispatch("setElementListItemCapture",{type:"editor",element:n.hoverElementIdData,vuexCaptureMark:"start"}),n.$store.dispatch("setElementId",n.hoverElementId)},function(o){var r=o.clientX-e,a=o.clientY-t,i=n.hoverElementIdData.style||{};i=g()(i,{left:r+"px",top:a+"px"}),n.$store.dispatch("setElementListItemCapture",{type:"editor",element:g()(n.hoverElementIdData,{style:i})})},function(e){n.$store.dispatch("setIsMove",!1),n.$store.dispatch("setElementListItemCapture",{type:"editor",element:n.hoverElementIdData,vuexCaptureMark:"end"}),n.$store.dispatch("setHoverElementId","")})})}}},ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.hoverElementId&&!e.isEditor,expression:"hoverElementId && !isEditor"}],staticClass:"element-hover",class:[e.isMove?"element-move":""],style:e.elementHoverStyle,on:{dblclick:e.ondblclick}},[n("div",{staticClass:"block",on:{mouseout:e.blockmouseout}})])},oe=[];ne._withStripped=!0;var re={render:ne,staticRenderFns:oe},ae=re,ie=!1,se=n("VU/8"),le=i,ce=se(te,ae,!1,le,"data-v-a5192472",null);ce.options.__file="src/components/ElementHover.vue",ce.esModule&&Object.keys(ce.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var me=ce.exports,de={name:"TextEditor",props:{},data:function(){return{}},computed:d()({},Object(u.b)(["isEditor"]),Object(u.c)({selectElementId:function(e){return e.element.selectElementId},elementList:function(e){return e.element.elementList},selectElementData:function(){var e=this;return this.elementList.find(function(t){return t.elementId==e.selectElementId})||{}}}),{elementStyle:function(){return this.selectElementData&&this.selectElementData.style?this.selectElementData.style:{}}}),watch:{isEditor:function(e){var t=this;e&&"text-element"==this.selectElementData.type&&this.$nextTick(function(){t.$refs.computeBlock.focus()})}},mounted:function(){},methods:{onComputeBlockFocus:function(){this.$store.dispatch("setElementListItemCapture",{type:"editor",element:this.selectElementData,vuexCaptureMark:"start"});var e=this.$refs.computeBlock;if(window.getSelection){var t=document.createRange();t.selectNodeContents(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(t)}},onComputeBlockKeyDown:function(e){var t=this,n=this.$refs.computeBlock;Object(Y.a)(function(){var e=n.offsetWidth+"px",o=n.offsetHeight+"px",r=t.selectElementData.style||{};r=g()(r,{height:o,width:e}),t.$store.dispatch("setElementListItemCapture",{type:"editor",element:g()(t.selectElementData,{style:r})})},0)},onComputeBlockBlur:function(){var e=this.$refs.computeBlock,t=this.selectElementData,n=e.innerText;t.text=n,this.$store.dispatch("setElementListItemCapture",{type:"editor",element:t,vuexCaptureMark:"end"}),this.$store.dispatch("setIsEditor",!1)}}},he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isEditor&&"text-element"==e.selectElementData.type?n("div",{staticClass:"text-editor",style:e.elementStyle},[n("div",{ref:"computeBlock",staticClass:"compute-block",attrs:{contenteditable:"true"},on:{focus:e.onComputeBlockFocus,blur:e.onComputeBlockBlur,keydown:e.onComputeBlockKeyDown}},[n("span",{ref:"textRender"},[e._v(e._s(e.selectElementData.text))])])]):e._e()},pe=[];he._withStripped=!0;var ve={render:he,staticRenderFns:pe},ge=ve,ue=!1,fe=n("VU/8"),xe=s,ye=fe(de,ge,!1,xe,"data-v-6df30de1",null);ye.options.__file="src/components/TextEditor.vue",ye.esModule&&Object.keys(ye.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Ie=ye.exports,be={name:"ImgEditor",directives:{arrow:{bind:function(e,t,n){var o=n.context,r={direction:"",element:{minWidth:14,minHeight:14,width:0,height:0,originWidth:0,originHeight:0,left:0,top:0},coverImg:{width:0,height:0,x:0,y:0},referVector:{x:0,y:0},center:{},startPoint:{x:0,y:0}};N(e,function(t){t.stopPropagation(),t.preventDefault(),o.isOperateEditor=!0;var n=o.elementStyle&&o.elementStyle.width&&parseFloat(o.elementStyle.width),a=o.elementStyle&&o.elementStyle.height&&parseFloat(o.elementStyle.height);o.resetArrowVectors(n,a);var i=e.classList[1];r.direction=i.replace("point-",""),r.element.width=o.elementStyle&&o.elementStyle.width?parseFloat(o.elementStyle.width):0,r.element.height=o.elementStyle&&o.elementStyle.height?parseFloat(o.elementStyle.height):0,r.element.originWidth=o.elementStyle&&o.elementStyle.originWidth?parseFloat(o.elementStyle.originWidth):0,r.element.originHeight=o.elementStyle&&o.elementStyle.originHeight?parseFloat(o.elementStyle.originHeight):0,r.element.left=o.elementStyle&&o.elementStyle.left?parseFloat(o.elementStyle.left):0,r.element.top=o.elementStyle&&o.elementStyle.top?parseFloat(o.elementStyle.top):0,r.startPoint.x=t.clientX,r.startPoint.y=t.clientY,r.coverImg.width=o.coverImgData&&o.coverImgData.width?parseFloat(o.coverImgData.width):0,r.coverImg.height=o.coverImgData&&o.coverImgData.height?parseFloat(o.coverImgData.height):0,r.coverImg.x=o.coverImgData&&o.coverImgData.x?parseFloat(o.coverImgData.x):0,r.coverImg.y=o.coverImgData&&o.coverImgData.y?parseFloat(o.coverImgData.y):0,r.center=g()({},o.centerSpotPositon)},function(e){e.stopPropagation();var t=null,n=null,a="",i=void 0,s=void 0,l="",c="",m="",d=void 0,h=void 0,p=r.direction,v=o.elementStyle&&o.elementStyle.transform?o.elementStyle.transform:"",u=v.match(/rotateZ\((\S*)deg\)/)?v.match(/rotateZ\((\S*)deg\)/)[1]:0,f=parseFloat(u),x=e.clientX-r.startPoint.x,y=r.startPoint.y-e.clientY,I=R(o.arrowVectors.n,{x:x,y:y}),b=void 0,w=void 0,E=void 0,S=void 0,D=void 0,M=void 0;x<0&&(I=360-I);var k=(f+o.arrowVectors[r.direction].angle)%360;switch(a=I-k,l=A({x:x,y:y},a),r.direction){case"n":case"s":p=r.direction+"e";break;case"w":case"e":p="n"+r.direction}i=(f+o.arrowVectors[p[1]].angle)%360,i=k-i,m=l*Math.cos(i*Math.PI/180),s=(f+o.arrowVectors[p[0]].angle)%360,s=k-s,c=l*Math.cos(s*Math.PI/180),d=l*Math.cos((k-90)*Math.PI/180),h=l*Math.cos((k-180)*Math.PI/180),b=r.element.width+m,w=r.element.height+c;var F=g()({},o.selectElementData.style),C=g()({},o.selectElementData.coverImg);"nw"==r.direction?(E=r.coverImg.x,S=r.coverImg.y,D=r.coverImg.width-Math.abs(r.coverImg.x),M=r.coverImg.height-Math.abs(r.coverImg.y)):"sw"==r.direction?(E=r.coverImg.x,S=r.coverImg.y+c,D=r.coverImg.width-Math.abs(r.coverImg.x),M=r.element.height+Math.abs(r.coverImg.y)):"se"==r.direction?(E=r.coverImg.x+m,S=r.coverImg.y+c,D=r.element.width+Math.abs(r.coverImg.x),M=r.element.height+Math.abs(r.coverImg.y)):"ne"==r.direction?(E=r.coverImg.x+m,S=r.coverImg.y,D=r.element.width+Math.abs(r.coverImg.x),M=r.coverImg.height-Math.abs(r.coverImg.y)):"n"==r.direction?(E=r.coverImg.x,S=r.coverImg.y,b=r.element.width,D=r.element.width,M=r.coverImg.height-Math.abs(r.coverImg.y)):"s"==r.direction?(E=r.coverImg.x,S=r.coverImg.y+c,M=r.element.height+Math.abs(r.coverImg.y)):"w"==r.direction?(E=r.coverImg.x,S=r.coverImg.y,D=r.coverImg.width-Math.abs(r.coverImg.x)):"e"==r.direction&&(E=r.coverImg.x+m,S=r.coverImg.y,D=r.element.width+Math.abs(r.coverImg.x)),b<0?b=0:b>D&&(b=D,"nw"==r.direction?E=r.coverImg.x:"sw"==r.direction?E=r.coverImg.x:"se"==r.direction?E=0:"ne"==r.direction?E=0:"e"==r.direction&&(E=0)),w<0?w=0:w>M&&(w=M,"nw"==r.direction?S=r.coverImg.y:"sw"==r.direction?S=0:"se"==r.direction?S=0:"ne"==r.direction?S=r.coverImg.y:"n"==r.direction?S=r.coverImg.y:"s"==r.direction&&(S=0)),t={x:r.center.x+d/2,y:r.center.y+h/2},n={x:r.element.left+b/2+50,y:r.element.top+w/2+60},t.x!=n.x&&(F.left=t.x-parseFloat(b)/2-60+"px"),t.y!=n.y&&(F.top=t.y-parseFloat(w)/2-50+"px"),C.x=E+"px",C.y=S+"px",F.width=b+"px",F.height=w+"px",o.$store.dispatch("setElementListItemCapture",{type:"editor",element:g()(o.selectElementData,{style:F,coverImg:C}),vuexCaptureMark:"noCapture"})},function(e){e.preventDefault(),e.stopPropagation(),Object(Y.a)(function(){o.isOperateEditor=!1},100)})}},direction:{bind:function(e,t,n){var o=n.context,r={direction:"",element:{width:0,height:0,originWidth:0,originHeight:0},coverImg:{width:0,height:0,x:0,y:0},referVector:{x:0,y:0},center:{},startPoint:{x:0,y:0}};N(e,function(t){t.stopPropagation(),t.preventDefault(),o.isOperateEditor=!0;var n=o.coverImgData&&o.coverImgData.width&&parseFloat(o.coverImgData.width),a=o.coverImgData&&o.coverImgData.height&&parseFloat(o.coverImgData.height);o.resetDirectionVectors(n,a);var i=e.classList[2];r.direction=i.replace("dot-",""),r.element.width=o.elementStyle&&o.elementStyle.width?parseFloat(o.elementStyle.width):0,r.element.height=o.elementStyle&&o.elementStyle.height?parseFloat(o.elementStyle.height):0,r.element.originWidth=o.elementStyle&&o.elementStyle.originWidth?parseFloat(o.elementStyle.originWidth):0,r.element.originHeight=o.elementStyle&&o.elementStyle.originHeight?parseFloat(o.elementStyle.originHeight):0,r.startPoint.x=t.clientX,r.startPoint.y=t.clientY,r.coverImg.width=n,r.coverImg.height=a,r.coverImg.x=o.coverImgData&&o.coverImgData.x?parseFloat(o.coverImgData.x):0,r.coverImg.y=o.coverImgData&&o.coverImgData.y?parseFloat(o.coverImgData.y):0,r.center=g()({},o.imgCenterSpotPositon);var s=o.elementStyle&&o.elementStyle.transform?o.elementStyle.transform:"",l=s.match(/rotateZ\((\S*)deg\)/)?s.match(/rotateZ\((\S*)deg\)/)[1]:0;r.referVector=W({x:0,y:-1},l)},function(e){var t=e.clientX-r.startPoint.x,n=r.startPoint.y-e.clientY,a=r.element.originWidth/r.element.originHeight,i=R(r.referVector,{x:t,y:n});r.referVector.x*n-t*r.referVector.y>0&&(i=-i);var s=r.coverImg.x-Z({x:t,y:n},i,!1),l=r.coverImg.y+A({x:t,y:n},i,!1),c=void 0,m=void 0,d=void 0,h=void 0,p=void 0,v=void 0;if("nw"==r.direction?(c=r.coverImg.x,m=r.coverImg.y,d=r.coverImg.width+s-r.coverImg.x,h=r.coverImg.height+(s-r.coverImg.x)/a,p=r.element.width+Math.abs(r.coverImg.x),v=r.element.height+Math.abs(r.coverImg.y)):"sw"==r.direction?(c=r.coverImg.x,m=l,h=r.coverImg.height-(l-r.coverImg.y),d=r.coverImg.width-(l-r.coverImg.y)*a,p=r.element.width+Math.abs(r.coverImg.x),v=r.coverImg.height-Math.abs(r.coverImg.y)):"se"==r.direction?(c=r.coverImg.x-Z({x:t,y:n},i,!1),m=r.coverImg.y-Z({x:t,y:n},i,!1)/a,d=r.coverImg.width-(c-r.coverImg.x),h=r.coverImg.height-(m-r.coverImg.y),p=r.coverImg.width-Math.abs(r.coverImg.x),v=r.coverImg.height-Math.abs(r.coverImg.y)):"ne"==r.direction&&(c=s,m=r.coverImg.y,d=r.coverImg.width-(s-r.coverImg.x),h=r.coverImg.height-(s-r.coverImg.x)/a,v=r.element.height+Math.abs(r.coverImg.y),p=r.coverImg.width-Math.abs(r.coverImg.x)),d<=p?(d=p,h=p/a,"nw"==r.direction?(c=r.coverImg.x,m=r.coverImg.y):"sw"==r.direction?(c=r.coverImg.x,m=r.coverImg.height-Math.abs(r.coverImg.y)-h):"se"==r.direction?(c=0,m=r.coverImg.height-Math.abs(r.coverImg.y)-h):"ne"==r.direction&&(m=r.coverImg.y,c=0)):h<=v&&(h=v,d=v*a,"nw"==r.direction?(c=r.coverImg.x,m=r.coverImg.y):"sw"==r.direction?(c=r.coverImg.x,m=0):"se"==r.direction?(c=r.coverImg.width-Math.abs(r.coverImg.x)-d,m=0):"ne"==r.direction&&(m=r.coverImg.y,c=r.coverImg.width-Math.abs(r.coverImg.x)-d)),!(d<p||h<v||c>0||m>0)){var u=o.selectElementData.coverImg;u=g()(u,{height:h+"px",width:d+"px",x:c+"px",y:m+"px"}),o.$store.dispatch("setElementListItemCapture",{type:"editor",element:g()(o.selectElementData,{coverImg:u}),vuexCaptureMark:"noCapture"})}},function(e){e.preventDefault(),e.stopPropagation(),Object(Y.a)(function(){o.isOperateEditor=!1},100)})}}},props:{},data:function(){return{directionVectors:V,arrowVectors:V,position:["dot-nw","dot-ne","dot-se","dot-sw"],isOperateEditor:!1}},computed:d()({},Object(u.b)(["isEditor"]),Object(u.c)({selectElementId:function(e){return e.element.selectElementId},elementList:function(e){return e.element.elementList},selectElementData:function(){var e=this;return this.elementList.find(function(t){return t.elementId==e.selectElementId})||{}}}),{centerSpotPositon:function(){var e=void 0,t=void 0;if(this.elementStyle){var n=parseFloat(this.elementStyle.top)+50,o=parseFloat(this.elementStyle.left)+60,r=parseFloat(this.elementStyle.width),a=parseFloat(this.elementStyle.height);e=o+r/2,t=n+a/2}return{x:e,y:t}},imgCenterSpotPositon:function(){var e=void 0,t=void 0,n=this.elementStyle.top?parseFloat(this.elementStyle.top)+50:0,o=this.elementStyle.left?parseFloat(this.elementStyle.left)+60:0,r=this.coverImgData.width?parseFloat(this.coverImgData.width):0,a=this.coverImgData.height?parseFloat(this.coverImgData.height):0;return e=o+r/2,t=n+a/2,{x:e,y:t}},showImgEditor:function(){return this.isEditor&&"image-element"==this.selectElementData.type},elementStyle:function(){return this.selectElementData&&this.selectElementData.style?this.selectElementData.style:{}},coverAreaOperateStyle:function(){var e=g()({},this.coverAreaStyle);return e.zIndex=0,e},coverAreaStyle:function(){var e=this.elementStyle||{};return{width:e.width,height:e.height,top:e.top,left:e.left,zIndex:10002,position:"absolute",transform:e.transform}},coverImgData:function(){return(this.selectElementData||{}).coverImg||{}},coverAreaImgStyle:function(){return{width:this.coverImgData.width,height:this.coverImgData.height,transform:"translate("+this.coverImgData.x+", "+this.coverImgData.y+")"}},coverImgBlockStyle:function(){return{width:this.coverImgData.width,height:this.coverImgData.height}},coverEchoArea:function(){var e=this.elementStyle||{};return{width:e.width,height:e.height,overflow:"hidden"}},dotMaskStyle:function(){var e=this.elementStyle||{},t={},n=e.top,o=e.left,r=this.elementStyle&&this.elementStyle.transform?this.elementStyle.transform:"",a=r.match(/rotateZ\((\S*)deg\)/)?r.match(/rotateZ\((\S*)deg\)/)[1]:0,i=(this.coverImgData.x,this.coverImgData.y,e.width),s=e.height;return t.zIndex=3,t.position="absolute",t.width=i,t.height=s,t.top=n,t.left=o,t.transform="rotateZ("+a+"deg)",t},dotMaskContainerStyle:function(){return{width:this.coverImgData.width,height:this.coverImgData.height,transform:"translate("+this.coverImgData.x+", "+this.coverImgData.y+")"}},operateAreaStyle:function(){var e=this.elementStyle||{},t=e.width?parseFloat(e.width):0,n=e.originWidth?parseFloat(e.originWidth):0,o=e.height?parseFloat(e.height):0,r=e.originHeight?parseFloat(e.originHeight):0,a=e.top?parseFloat(e.top):0,i=e.left?parseFloat(e.left):0,s=n/r,l=void 0,c=void 0;return o<=t/s?(l=t,c=t/s):(l=o*s,c=o),{top:a+"px",left:i+"px",width:l+"px",height:c+"px"}}}),watch:{showImgEditor:function(e){var t=this;e?this.$nextTick(function(){t.$store.dispatch("setElementListItemCapture",{type:"editor",element:t.selectElementData,vuexCaptureMark:"start"}),document.addEventListener("click",t.clickListener,!0)}):document.removeEventListener("click",this.clickListener,!0)}},mounted:function(){this.initOperateAreaMoveEffect()},methods:{getDirection:function(e,t){t=t||0;for(var n=["scale-nw","scale-ne","scale-se","scale-sw"],o=Math.floor((t+22.5)/45),r=0;r<o;r+=1)n.push(n.shift());return n[e]},resetArrowVectors:function(e,t){var n=Math.atan(e/t)/Math.PI*180;this.arrowVectors.ne.angle=0+n,this.arrowVectors.se.angle=180-n,this.arrowVectors.sw.angle=180+n,this.arrowVectors.nw.angle=360-n},resetDirectionVectors:function(e,t){var n=Math.atan(e/t)/Math.PI*180;this.directionVectors.ne.angle=0+n,this.directionVectors.se.angle=180-n,this.directionVectors.sw.angle=180+n,this.directionVectors.nw.angle=360-n},clickListener:function(e){"imgEditorOperateArea"==e.target.id||this.isOperateEditor||(e.preventDefault(),e.stopPropagation(),this.$store.dispatch("setElementListItemCapture",{type:"editor",element:this.selectElementData,vuexCaptureMark:"end"}),this.$store.dispatch("setIsEditor",!1))},initOperateAreaMoveEffect:function(){var e=this,t=0,n=0,o=0,r=0,a=0,i=0,s=0,l=0,c=0,m=void 0,d=this;this.$nextTick(function(){var h=e.$refs.operateArea;N(h,function(e){d.isOperateEditor=!0,t=e.clientX,n=e.clientY,o=d.coverImgData.x?parseFloat(d.coverImgData.x):0,r=d.coverImgData.y?parseFloat(d.coverImgData.y):0,a=d.elementStyle.width?parseFloat(d.elementStyle.width):0,i=d.elementStyle.height?parseFloat(d.elementStyle.height):0,s=d.coverImgData.width?parseFloat(d.coverImgData.width):0,l=d.coverImgData.height?parseFloat(d.coverImgData.height):0;var h=d.elementStyle&&d.elementStyle.transform?d.elementStyle.transform:"";c=h.match(/rotateZ\((\S*)deg\)/)?h.match(/rotateZ\((\S*)deg\)/)[1]:0,m=W({x:0,y:-1},c)},function(e){var c=e.clientX-t,h=n-e.clientY,p=d.selectElementData.coverImg,v=R(m,{x:c,y:h});m.x*h-c*m.y>0&&(v=-v);var u=o-Z({x:c,y:h},v,!1),f=r+A({x:c,y:h},v,!1);u>0?u=0:u<a-s&&(u=a-s),f<i-l?f=i-l:f>0&&(f=0),p=g()(p,{x:u+"px",y:f+"px"}),d.$store.dispatch("setElementListItemCapture",{type:"editor",element:g()(d.selectElementData,{coverImg:p}),vuexCaptureMark:"noCapture"})},function(e){Object(Y.a)(function(){d.isOperateEditor=!1},100)})})}}},we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showImgEditor,expression:"showImgEditor"}],staticClass:"img-editor no-user-select"},[n("div",{staticClass:"cover-area",style:e.coverAreaStyle},[n("div",{staticClass:"cover-img-block",style:e.coverImgBlockStyle},[n("div",{style:e.coverEchoArea},[n("img",{style:e.coverAreaImgStyle,attrs:{src:e.selectElementData.imgSrc}})])]),n("span",{directives:[{name:"arrow",rawName:"v-arrow",value:!0,expression:"true"}],staticClass:"cropper-cropbox-line point-e line-e"}),n("span",{directives:[{name:"arrow",rawName:"v-arrow",value:!0,expression:"true"}],staticClass:"cropper-cropbox-line point-n line-n"}),n("span",{directives:[{name:"arrow",rawName:"v-arrow",value:!0,expression:"true"}],staticClass:"cropper-cropbox-line point-w line-w"}),n("span",{directives:[{name:"arrow",rawName:"v-arrow",value:!0,expression:"true"}],staticClass:"cropper-cropbox-line point-s line-s"}),n("span",{directives:[{name:"arrow",rawName:"v-arrow",value:!0,expression:"true"}],staticClass:"cropper-cropbox-point point-ne"}),n("span",{directives:[{name:"arrow",rawName:"v-arrow",value:!0,expression:"true"}],staticClass:"cropper-cropbox-point point-nw"}),n("span",{directives:[{name:"arrow",rawName:"v-arrow",value:!0,expression:"true"}],staticClass:"cropper-cropbox-point point-sw"}),n("span",{directives:[{name:"arrow",rawName:"v-arrow",value:!0,expression:"true"}],staticClass:"cropper-cropbox-point point-se"})]),n("div",{style:e.coverAreaOperateStyle},[n("div",{staticClass:"operate-area",style:e.operateAreaStyle},[n("img",{ref:"operateArea",staticClass:"operate-area-img",style:e.coverAreaImgStyle,attrs:{id:"imgEditorOperateArea",src:e.selectElementData.imgSrc}})])]),n("div",{staticClass:"dot-mask",style:e.dotMaskStyle},[n("div",{staticClass:"dot-mask-container",style:e.dotMaskContainerStyle},e._l(e.position,function(t,o){return n("div",{directives:[{name:"direction",rawName:"v-direction",value:!0,expression:"true"}],key:o,staticClass:"dot",class:[e.getDirection(o,e.elementStyle&&e.elementStyle.rotate),t]})}),0)]),n("div",{staticClass:"bg-mask"})])},Ee=[];we._withStripped=!0;var Se={render:we,staticRenderFns:Ee},De=Se,Me=!1,ke=n("VU/8"),Fe=l,Ce=ke(be,De,!1,Fe,"data-v-2b4fa079",null);Ce.options.__file="src/components/ImgEditor.vue",Ce.esModule&&Object.keys(Ce.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var _e=Ce.exports,$e=0,je={name:"H5Editor",data:function(){return{colorModel:"",rotateModel:"",haveUndo:!1,haveRedo:!1}},computed:d()({},Object(u.c)({projectIndex:function(e){return e.projectIndex},selectElementId:function(e){return e.element.selectElementId},elementList:function(e){return e.element.elementList}}),{selectElement:function(){var e=this;return this.elementList.find(function(t){return t.elementId==e.selectElementId})||null}}),components:{makaElement:M,makaOperate:ee,imageElement:H,makaElementHover:me,TextEditor:Ie,ImgEditor:_e},mounted:function(){},created:function(){},methods:{renderComonentType:function(e){return"text-element"==e.type?"maka-element":e.type?e.type:"maka-element"},colorChange:function(e){if(this.selectElement){var t=Object(Y.b)(this.selectElement.style||{});t=g()(t,{color:this.colorModel}),this.$store.dispatch("setElementListItemCapture",{type:"editor",element:g()({},this.selectElement,{style:t})})}},rotateChange:function(){if(this.selectElement){var e=Object(Y.b)(this.selectElement.style||{});e=g()(e,{transform:this.rotateModel}),this.$store.dispatch("setElementListItemCapture",{type:"editor",element:g()({},this.selectElement,{style:e})})}},addImageElement:function(){$e++;var e={type:"image-element",imgSrc:"https://img1.maka.im/user/600666913/images/411016_65c9ab7157d41ed686d4b535e1a73297.jpg?x-oss-process=image/resize,w_1240",elementId:$e,style:{margin:0,position:"absolute",top:"60px",left:"10px",opacity:1,transform:"rotateZ(0deg)",width:"150px",height:"225px",originWidth:"1240px",originHeight:"1860px",cursor:"move"},coverImg:{width:"150px",height:"225px",x:0,y:0}};this.$store.dispatch("setElementListItemCapture",{type:"add",element:e})},addElement:function(e){for(var t,n={type:"text-element",text:"默认元素",elementId:0,style:(t={color:"#000",margin:0,position:"absolute",top:"60px",left:"10px",transform:"none",opacity:1,verticalAlign:"middle"},p()(t,"transform","rotateZ(0deg)"),p()(t,"textAlign","center"),p()(t,"fontSize","24px"),p()(t,"fontWeight","normal"),p()(t,"fontStyle","normal"),p()(t,"textDecoration","none"),p()(t,"lineHeight","1.5"),p()(t,"width","150px"),p()(t,"height","36px"),t)},o=e||1,r=[],a=0;a<o;a++){$e++,n.elementId=$e;var i=Object(Y.b)(n);r.push(i)}this.$store.dispatch("setElementListItemCapture",{type:"add",element:r})}}},Oe=d()({},je),Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h5-editor clear"},[n("div",{staticClass:"statistics"}),e._l(e.elementList,function(t,o){return n(e.renderComonentType(t),{key:t.elementId,tag:"component",attrs:{"element-data":t}})}),n("maka-operate"),n("maka-element-hover"),n("text-editor"),n("img-editor")],2)},Le=[];Pe._withStripped=!0;var He={render:Pe,staticRenderFns:Le},ze=He,Ve=!1,Re=n("VU/8"),Ae=c,Ze=Re(Oe,ze,!1,Ae,"data-v-32e386a0",null);Ze.options.__file="src/views/h5Editor/index.vue",Ze.esModule&&Object.keys(Ze.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");t.default=Ze.exports}});
//# sourceMappingURL=0.da2cb0536ef219ff6d73.js.map