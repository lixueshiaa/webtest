var A=Object.defineProperty;var x=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var D=(t,e,o)=>e in t?A(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,E=(t,e)=>{for(var o in e||(e={}))L.call(e,o)&&D(t,o,e[o]);if(x)for(var o of x(e))U.call(e,o)&&D(t,o,e[o]);return t};var B=(t,e,o)=>new Promise((a,u)=>{var m=s=>{try{i(o.next(s))}catch(c){u(c)}},p=s=>{try{i(o.throw(s))}catch(c){u(c)}},i=s=>s.done?a(s.value):Promise.resolve(s.value).then(m,p);i((o=o.apply(t,e)).next())});import{B as V}from"./index.9788db2e.js";import{B as J}from"./BasicForm.d1b5a4f4.js";import"./componentMap.6942b0b6.js";import{u as H}from"./useForm.26fd4105.js";import"./RadioButtonGroup.6d9641c3.js";import{a0 as F,bR as $,a as q,z as y,j as r,bg as z,an as G,f as W,U as X,o as f,k as C,G as k,i as I,a9 as K,N as O,J as Q,t as Y,l as Z,p as ee,ad as te,n as oe,bO as ne}from"./index.9eb451d3.js";import"./JDictSelectTag.3b1f5a5e.js";import"./JUpload.38683df0.js";import{c as M}from"./render.9a5e321f.js";const ke=[{title:"\u8BF7\u6C42url",dataIndex:"url",align:"center",customRender:function(t){return e=>M(e,{dictField:"",fieldHref:"",extendParams:{}},t)}({init:!1,show:!1})},{title:"\u8FD4\u56DEjson",dataIndex:"responJson",align:"center",customRender:function(t){return e=>M(e,{dictField:"",fieldHref:"",extendParams:{}},t)}({init:!1,show:!1})},{title:"\u63A5\u53E3\u540D\u79F0",dataIndex:"apiName",align:"center",customRender:function(t){return e=>M(e,{dictField:"",fieldHref:"",extendParams:{}},t)}({init:!1,show:!1})}],Me=[{label:"\u8BF7\u6C42url",field:"url",component:"JInput",colProps:{span:6}},{label:"\u63A5\u53E3\u540D\u79F0",field:"apiName",component:"JInput",colProps:{span:6}}],re=[{label:"\u8BF7\u6C42url",field:"url",component:"Input",dynamicRules:({model:t,schema:e})=>[{required:!0,message:"\u8BF7\u8F93\u5165\u8BF7\u6C42url!"},{pattern:/^.+$/,message:"\u8BF7\u8F93\u5165\u8BF7\u6C42url!"}]},{label:"\u8FD4\u56DEjson",field:"responJson",component:"Input",dynamicRules:({model:t,schema:e})=>[{required:!0,message:"\u8BF7\u8F93\u5165\u8FD4\u56DEjson!"},{pattern:/^.+$/,message:"\u8BF7\u8F93\u5165\u8FD4\u56DEjson!"}]},{label:"\u63A5\u53E3\u540D\u79F0",field:"apiName",component:"Input"}],be="/onlMock/exportXls",_e="/onlMock/importExcel",xe=t=>F.get({url:"/onlMock/list",params:t}),De=(t,e)=>F.delete({url:"/onlMock/delete",params:t},{joinParamsToUrl:!0}).then(()=>{e()}),Ee=(t,e)=>{$.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u6570\u636E",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:()=>F.delete({url:"/onlMock/deleteBatch",data:t},{joinParamsToUrl:!0}).then(()=>{e()})})},ae=(t,e)=>{let o=e?"/onlMock/edit":"/onlMock/add";return F.post({url:o,params:t})},se=oe("span",null,null,-1),le=q({__name:"OnlMockModal",emits:["register","success"],setup(t,{emit:e}){const o={},a=y("");let u="",m={};const p=y([{label:"\u53D6\u6D88",methods:"cancel",ifShow:()=>r(a)!=="detail"},{label:"\u786E\u8BA4",methods:"handleSubmit",type:"primary",ifShow:()=>r(a)!=="detail"}]),[i,s]=H({labelWidth:150,schemas:re,showActionButtonGroup:!1}),{setProps:c,resetFields:P,setFieldsValue:R,validate:b,getFieldsValue:w}=s,[S,{setModalProps:g,closeModal:_}]=z(n=>B(this,null,function*(){a.value=n.action,u=n.title,m=n.record,yield P(),g({confirmLoading:!1}),r(a)!=="add"&&G(()=>{R(E({},n.record)),setTimeout(()=>{b()},0)}),c({disabled:r(a)==="detail"})})),j=W(()=>r(a)==="detail"?"\u8BE6\u60C5":r(a)==="editor"?"\u7F16\u8F91":r(a)==="add"?"\u65B0\u589E":u);function v(){return p.value.map(n=>{const d=n.methods;return n.onClick=()=>{h[d]&&h[d]()},n})}function T(n){return typeof n=="function"?n():n}const h={handleSubmit:function(){return B(this,null,function*(){try{const n=yield b(),d=w();g({confirmLoading:!0}),yield ae(ne(m,d,n),r(a)==="editor"),_(),e("success")}finally{g({confirmLoading:!1})}})},cancel:function(){_()}};return o["./onlMockMixin.ts"]&&o["./onlMockMixin.ts"].default({methods:h,footerBtnList:p,formMethods:s}),(n,d)=>{const N=X("a-button");return f(),C(r(V),te(n.$attrs,{onRegister:r(S),title:r(j),onOk:n.handleSubmit}),{footer:k(()=>[se,(f(!0),I(O,null,K(v(),(l,ue)=>(f(),I(O,null,[T(l.ifShow)?(f(),C(N,{key:0,type:l.type,preIcon:l.preIcon,disabled:l.disabled===!0,onClick:l.onClick},{default:k(()=>[Q(Y(l.label),1)]),_:2},1032,["type","preIcon","disabled","onClick"])):Z("",!0)],64))),256))]),default:k(()=>[ee(r(J),{onRegister:r(i)},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}}});var ye=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));export{ye as O,le as _,_e as a,Ee as b,ke as c,De as d,be as g,xe as l,Me as s};
