var te=Object.defineProperty,se=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var H=(e,s,d)=>s in e?te(e,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):e[s]=d,f=(e,s)=>{for(var d in s||(s={}))oe.call(s,d)&&H(e,d,s[d]);if(B)for(var d of B(s))re.call(s,d)&&H(e,d,s[d]);return e},q=(e,s)=>se(e,ne(s));import{c as Y,aE as Z,f as N,j as a,a as le,bf as ae,D as ce,p as b,O as z,bZ as ie,af as x,aG as W,b_ as G,E as ue,L as de,ad as K,F as fe,ag as me,Q as he,J as be,b$ as pe,c0 as ge,c1 as ye}from"./index.6cf4d174.js";import{c as Q}from"./componentMap.bdddb878.js";const{t:$}=Y();function U(e){return e.includes("Input")||e.includes("Complete")?$("common.inputText"):e.includes("Picker")||e.includes("Select")||e.includes("Cascader")||e.includes("Checkbox")||e.includes("Radio")||e.includes("Switch")?$("common.chooseText"):""}const Pe=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function Ce(){return[...Pe,"RangePicker"]}function ke(e,s,d){["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(s)?e.type=d?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(s)?e.type="array":["InputNumber"].includes(s)&&(e.type="number")}function Se(e,s){return e&&["Input","InputPassword","InputSearch","InputTextArea"].includes(e)&&s&&Z(s)?`${s}`:s}const je=Ce();function we(e,s){return N(()=>{const d=a(e),{labelCol:j={},wrapperCol:M={}}=d.itemProps||{},{labelWidth:T,disabledLabelWidth:h}=d,{labelWidth:k,labelCol:F,wrapperCol:L}=a(s);if(h)return{labelCol:j,wrapperCol:M};if(!k&&!T&&!F)return j.style={textAlign:"left"},{labelCol:j,wrapperCol:M};let w=T||k;const V=f(f({},F),j),O=f(f({},L),M);return w&&(w=Z(w)?`${w}px`:w),{labelCol:f({style:{width:w}},V),wrapperCol:f({style:{width:`calc(100% - ${w})`}},O)}})}function E(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ie(e)}var De=le({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object}},setup(e,{slots:s}){const{t:d}=Y(),{schema:j,formProps:M}=ae(e),T=we(j,M),h=N(()=>{const{allDefaultValues:n,formModel:t,schema:l}=e,{mergeDynamicData:c}=e.formProps;return{field:l.field,model:t,values:f(f(f({},c),n),t),schema:l}}),k=N(()=>{var i;const{schema:n,tableAction:t,formModel:l,formActionType:c}=e;let{componentProps:o={}}=n;return x(o)&&(o=(i=o({schema:n,tableAction:t,formModel:l,formActionType:c}))!=null?i:{}),n.component==="Divider"&&(o=Object.assign({type:"horizontal"},o,{orientation:"left",plain:!0})),o}),F=N(()=>{const{disabled:n}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:l=!1}=a(k);let c=!!n||l;return W(t)&&(c=t),x(t)&&(c=t(a(h))),c});function L(){const{show:n,ifShow:t}=e.schema,{showAdvancedButton:l}=e.formProps,c=l&&W(e.schema.isAdvanced)?e.schema.isAdvanced:!0;let o=!0,i=!0;return W(n)&&(o=n),W(t)&&(i=t),x(n)&&(o=n(a(h))),x(t)&&(i=t(a(h))),o=o&&c,{isShow:o,isIfShow:i}}function w(){var R;const{rules:n=[],component:t,rulesMessageJoinLabel:l,label:c,dynamicRules:o,required:i}=e.schema;if(x(o))return o(a(h));let r=me(n);const{rulesMessageJoinLabel:P}=e.formProps,p=Reflect.has(e.schema,"rulesMessageJoinLabel")?l:P,g=U(t)+`${p?c:""}`;function I(m,u){const C=m.message||g;return u===void 0||ge(u)||Array.isArray(u)&&u.length===0||typeof u=="string"&&u.trim()===""||typeof u=="object"&&Reflect.has(u,"checked")&&Reflect.has(u,"halfChecked")&&Array.isArray(u.checked)&&Array.isArray(u.halfChecked)&&u.checked.length===0&&u.halfChecked.length===0?Promise.reject(C):Promise.resolve()}const y=x(i)?i(a(h)):i;(!r||r.length===0)&&y&&(r=[{required:y,validator:I}]);const v=r.findIndex(m=>Reflect.has(m,"required")&&!Reflect.has(m,"validator"));if(v!==-1){const m=r[v],{isShow:u}=L();if(u||(m.required=!1),t){Reflect.has(m,"type")||(m.type=t==="InputNumber"?"number":"string"),m.message=m.message||g,(t.includes("Input")||t.includes("Textarea"))&&(m.whitespace=!0);const C=(R=a(k))==null?void 0:R.valueFormat;ke(m,t,C)}}const A=r.findIndex(m=>m.max);return A!==-1&&!r[A].validator&&(r[A].message=r[A].message||d("component.form.maxTip",[r[A].max])),r}function V(){var J;const{renderComponentContent:n,component:t,field:l,changeEvent:c="change",valueField:o}=e.schema,i=t&&["Switch","Checkbox"].includes(t),r=`on${ye(c)}`,P={[r]:(...S)=>{const[D]=S;y[r]&&y[r](...S);const _=D?D.target:null,ee=_?i?_.checked:_.value:D;e.setFormModel(l,ee)}},p=Q.get(t),{autoSetPlaceHolder:g,size:I}=e.formProps,y=q(f({allowClear:!0,getPopupContainer:S=>S.parentNode,size:I},a(k)),{disabled:a(F)});!y.disabled&&g&&t!=="RangePicker"&&t&&(y.placeholder=((J=a(k))==null?void 0:J.placeholder)||U(t)+e.schema.label),y.codeField=l,y.formValues=a(h);const A={[o||(i?"checked":"value")]:e.formModel[l]},R=a(k).dynamicForm||{},m=Object.keys(R).reduce((S,D)=>(S[D]=e.formModel[R[D]],S),{}),u=q(f(f(f({},y),P),A),{dynamicForm:m});if(!n)return b(p,u,null);const C=x(n)?f({},n(a(h))):{default:()=>n};return b(p,u,E(C)?C:{default:()=>[C]})}function O(){const{label:n,helpMessage:t,helpComponentProps:l,subLabel:c}=e.schema,{labelCol:o,labelWidth:i}=e.formProps;let r=null;i&&Object.keys(he(o)).length===0&&(r="display:inline-block;white-space:pre-wrap");const P=c?b("span",{style:r},[n,be(" "),b("span",{class:"text-secondary"},[c])]):b("span",{style:r},[n]),p=x(t)?t(a(h)):t;return!p||Array.isArray(p)&&p.length===0?P:b("span",{style:r},[P,b(pe,K({placement:"top",class:"mx-1",text:p},l),null)])}function X(){const{itemProps:n,slot:t,render:l,field:c,suffix:o,component:i}=e.schema,{labelCol:r,wrapperCol:P}=a(T),{colon:p}=e.formProps;if(i==="Divider"){let g;return b(z,{span:24},{default:()=>[b(de,a(k),E(g=O())?g:{default:()=>[g]})]})}else{const g=()=>t?G(s,t,a(h)):l?l(a(h)):V(),I=!!o,y=x(o)?o(a(h)):o;return b(fe.Item,K({name:c,colon:p,class:{"suffix-item":I}},n,{label:O(),rules:w(),labelCol:r,wrapperCol:P}),{default:()=>[b("div",{style:"display:flex"},[b("div",{style:"flex:1; width: 100%;"},[g()]),I&&b("span",{class:"suffix"},[y])])]})}}return()=>{let n;const{colProps:t={},colSlot:l,renderColContent:c,component:o}=e.schema;if(!Q.has(o))return null;const{baseColProps:i={}}=e.formProps,r=f(f({},i),t),{isIfShow:P,isShow:p}=L(),g=a(h);return P&&ce(b(z,r,E(n=(()=>l?G(s,l,g):c?c(g):X())())?n:{default:()=>[n]}),[[ue,p]])}}});export{De as _,je as d,Se as h};
