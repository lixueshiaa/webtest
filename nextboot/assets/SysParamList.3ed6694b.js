var de=Object.defineProperty,pe=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var q=(a,r,l)=>r in a?de(a,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[r]=l,z=(a,r)=>{for(var l in r||(r={}))he.call(r,l)&&q(a,l,r[l]);if(X)for(var l of X(r))fe.call(r,l)&&q(a,l,r[l]);return a},G=(a,r)=>pe(a,me(r));var H=(a,r,l)=>new Promise((E,g)=>{var k=p=>{try{_(l.next(p))}catch(w){g(w)}},D=p=>{try{_(l.throw(p))}catch(w){g(w)}},_=p=>p.done?E(p.value):Promise.resolve(p.value).then(k,D);_((l=l.apply(a,r)).next())});import{s as _e,T as we}from"./componentMap.bdddb878.js";import{B as Ce}from"./BasicTable.5bdcd073.js";import"./TableImg.ceb3addb.js";import{a as J,u as be,bn as Se,z as C,b9 as ge,bw as ye,bj as xe,bO as A,j as f,U as y,o as c,i as x,k as b,ai as Q,p as S,G as d,N as B,a9 as ke,J as M,t as $,l as I,n as De,bo as Fe,Q as V}from"./index.6cf4d174.js";import"./index.f8f2ddf0.js";import{u as Ae}from"./useListPage.8a0ab0f8.js";import{l as Me,s as U,g as Ee,a as ve,_ as Be,b as Ie,d as Te,c as Re}from"./SysParamModal.45d3a924.js";import{d as je}from"./download.61ffebe5.js";import"./index.e9415cf9.js";import"./useFormItem.ed1b0f05.js";import"./RadioButtonGroup.e396598a.js";import"./BasicModal.45214da2.js";import"./useWindowSizeFn.99e468e7.js";import"./index.260e697f.js";import"./index.10fcd82b.js";import"./useCountdown.5a1a5b16.js";import"./api.4a4df057.js";import"./props.932becef.js";import"./JDictSelectTag.77cd1e49.js";import"./Tree.vue_vue_type_style_index_0_lang.dd81644b.js";import"./useContextMenu.988cb2d7.js";import"./index.d3e30781.js";import"./onMountedOrActivated.c1705977.js";import"./index.f170d56c.js";import"./htmlmixed.9b0e93d2.js";import"./vue.94c7f829.js";import"./depart.api.cb5ba1c2.js";import"./JUpload.a8971a82.js";import"./functional.4d9308b0.js";import"./index.410f2d77.js";import"./EditOutlined.ebbc06a3.js";import"./BasicForm.74bae903.js";import"./FormItem.vue_vue_type_script_lang.0f2a80c5.js";import"./useForm.0a8b633b.js";import"./index.28df25ce.js";import"./useContentViewHeight.183e9878.js";import"./FormOutlined.478bac7f.js";import"./useSortable.746d5656.js";import"./useTable.5c9bbf6b.js";import"./render.e804ff54.js";import"./index.e3d374a0.js";import"./base64Conver.bb012c73.js";const Le=M(" \u5220\u9664 "),Pe=M("\u6279\u91CF\u64CD\u4F5C "),Oe=["innerHTML"],Ne={key:0,style:{"font-size":"12px","font-style":"italic"}},He=M("\u4E0B\u8F7D"),Ve=J({name:"sysParam-sysParam"}),To=J(G(z({},Ve),{props:{query:{type:Object,default:{}}},setup(a,{expose:r}){const l=a;be(),Se();const E={},g=C(null),k=C(null),D=C(null),_=C(null);ge();const p=[],w=C([{label:"\u65B0\u589E",methods:"handleAdd",preIcon:"ant-design:plus-outlined",ifShowMethod:"handleAddShow"},{label:"\u5BFC\u51FA",methods:"onExportXls",preIcon:"ant-design:export-outlined",ifShowMethod:"handleExportShow"}]),T=C([{label:"\u7F16\u8F91",methods:"handleEdit",ifShowMethod:"handleEditShow"}]),R=C([{label:"\u8BE6\u60C5",methods:"handleDetail",ifShowMethod:"handleDetailShow"},{label:"\u5220\u9664",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u5417\uFF1F",methods:"handleDelete"},ifShowMethod:"handleDeleteShow"}]),t={handleAdd:function(){L(!0,{action:"add"})},handleEdit:function(e){L(!0,{record:e,action:"editor"})},handleAddShow:function(e){return!0},handleEditShow:function(e){return!0},handleDeleteShow:function(e){return!0},handleBatchDeleteShow:function(e){return!0},handleDetailShow:function(e){return!0},handleExportShow:function(e){return!0},handleImportShow:function(e){return!0},batchHandleDelete:function(){return H(this,null,function*(){yield Ie({ids:N.value},v)})},handleDetail:function(e){L(!0,{record:e,action:"detail"})},handleDelete:function(e){return H(this,null,function*(){yield Te({id:e.id},v)})}},j=ye(),{currentRoute:K}=j,[W,{openModal:L}]=xe(),Y=_e(Re),{prefixCls:Ue,tableContext:Z,onExportXls:ee,onImportXls:oe}=Ae({tableProps:{title:"\u516C\u5171\u53C2\u6570\u914D\u7F6E\u8868",api:Me,columns:Y,canResize:!0,beforeFetch:e=>{const u=ie(),o=A({},f(K).query||{});let n=u.getFieldsValue()||{};Object.keys(n).map(h=>{n[h]?Array.isArray(n[h])&&(n[h]=n[h].join(",")):n[h]=""});const s=l.query||{},m=A(o,e,n,s);return Object.assign(e,m),Object.keys(e).map(h=>{for(let F=0;F<p.length;F++)e[p[F]]=void 0;(e[h]===""||e[h]===null)&&(e[h]=void 0)}),e},useSearchForm:!!U.length,pagination:void 0,formConfig:{schemas:U,autoSubmitOnEnter:!0,actionColOptions:{span:8,style:{textAlign:"left",paddingLeft:"10px"}},labelCol:{},wrapperCol:{},baseColProps:null,showAdvancedButton:!(U.length<=3),autoAdvancedCol:3,autoAdvancedLine:99,alwaysShowLines:99,searchActionColIndexValue:0,searchActionColIndexesModel:"N",fieldMapToNumber:[],fieldMapToTime:[]},actionColumn:{fixed:"right",width:120}},exportConfig:{name:"\u516C\u5171\u53C2\u6570\u914D\u7F6E\u8868",url:Ee,params:A({},p.reduce((e,u)=>(e[u]=void 0,e),{}))},importConfig:{url:ve,success:v}});t.onExportXls=ee,t.onImportXls=oe;const[te,P,O]=Z,{reload:ne,getForm:ie}=P,{rowSelection:le,selectedRowKeys:N}=O;function re(e){e&&e.split(",").map(o=>{je({url:Fe(o)})})}function v(){(N.value=[])&&ne()}function se(){return f(w).map(e=>{const u=V(e),o=u.methods;return u.onClick=()=>{t[o]&&t[o]()},u})}function ae(e){return f(T).map(u=>{const o=V(u),n=o.methods,s=A({},o.popConfirm||{}),m=o.ifShowMethod;return o.ifShow=m&&t[m]?t[m](e):!0,s.methods?(s.confirm=t[s.methods]&&t[s.methods].bind(null,e),o.popConfirm=s):n&&(o.onClick=t[n]&&t[n].bind(null,e)),o})}function ue(e){return f(R).map(u=>{const o=V(u),n=o.methods,s=A({},o.popConfirm||{}),m=o.ifShowMethod;return o.ifShow=m&&t[m]?t[m](e):!0,s.methods?(s.confirm=t[s.methods]&&t[s.methods].bind(null,e),o.popConfirm=s):n&&(o.onClick=t[n]&&t[n].bind(null,e)),o})}return E["./sysParamMixin.ts"]&&E["./sysParamMixin.ts"].default({methods:t,actionBtns:T,dropDownActionBtns:R,titleBtns:w,tableMethods:P,selections:O,router:j,bottomComponent:g,topComponent:k,topRef:D,bottomRef:_}),r({methods:t,actionBtns:T,dropDownActionBtns:R,titleBtns:w,tableMethods:P,selections:O,router:j,bottomComponent:g,topComponent:k,topRef:D,bottomRef:_}),(e,u)=>{const o=y("j-upload-button"),n=y("a-button"),s=y("Icon"),m=y("a-menu-item"),h=y("a-menu"),F=y("a-dropdown");return c(),x("div",null,[(c(),b(Q(k.value),{ref_key:"topRef",ref:D},null,512)),S(f(Ce),{onRegister:f(te),rowSelection:f(le)},{tableTitle:d(()=>[(c(!0),x(B,null,ke(se(),(i,ce)=>(c(),x(B,null,[i.btnType==="import"?(c(),x(B,{key:0},[i.ifShow!==!1?(c(),b(o,{key:0,type:"primary",disabled:i.disabled===!0,preIcon:i.preIcon,onClick:i.onClick},{default:d(()=>[M($(i.label),1)]),_:2},1032,["disabled","preIcon","onClick"])):I("",!0)],64)):(c(),x(B,{key:1},[i.ifShow!==!1?(c(),b(n,{key:0,type:"primary",disabled:i.disabled===!0,preIcon:i.preIcon,onClick:i.onClick},{default:d(()=>[M($(i.label),1)]),_:2},1032,["disabled","preIcon","onClick"])):I("",!0)],64))],64))),256)),f(N).length>0?(c(),b(F,{key:0},{overlay:d(()=>[S(h,null,{default:d(()=>[t.handleBatchDeleteShow?(c(),b(m,{key:"1",onClick:t.batchHandleDelete},{default:d(()=>[S(s,{icon:"ant-design:delete-outlined"}),Le]),_:1},8,["onClick"])):I("",!0)]),_:1})]),default:d(()=>[S(n,null,{default:d(()=>[Pe,S(s,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):I("",!0)]),action:d(({record:i})=>[S(f(we),{actions:ae(i),dropDownActions:ue(i)},null,8,["actions","dropDownActions"])]),htmlSlot:d(({text:i})=>[De("div",{innerHTML:i},null,8,Oe)]),fileSlot:d(({text:i})=>[i?(c(),b(n,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download-outlined",size:"small",onClick:ce=>re(i)},{default:d(()=>[He]),_:2},1032,["onClick"])):(c(),x("span",Ne,"\u65E0\u6587\u4EF6"))]),_:1},8,["onRegister","rowSelection"]),(c(),b(Q(g.value),{ref_key:"bottomRef",ref:_},null,512)),S(Be,{onRegister:f(W),onSuccess:v},null,8,["onRegister"])])}}}));export{To as default};
