var H=Object.defineProperty;var R=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var L=(a,o,e)=>o in a?H(a,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[o]=e,T=(a,o)=>{for(var e in o||(o={}))K.call(o,e)&&L(a,e,o[e]);if(R)for(var e of R(o))O.call(o,e)&&L(a,e,o[e]);return a};var k=(a,o,e)=>new Promise((B,f)=>{var A=p=>{try{d(e.next(p))}catch(c){f(c)}},v=p=>{try{d(e.throw(p))}catch(c){f(c)}},d=p=>p.done?B(p.value):Promise.resolve(p.value).then(A,v);d((e=e.apply(a,o)).next())});import{B as X}from"./index.9788db2e.js";import{B as Y}from"./BasicForm.d1b5a4f4.js";import"./componentMap.6942b0b6.js";import{u as Z}from"./useForm.26fd4105.js";import"./RadioButtonGroup.6d9641c3.js";import{a1 as ee,a as te,z as g,B as oe,bg as ae,an as se,U as m,o as y,k as b,G as s,p as t,n,ai as re,j as F,i as le,a9 as ne,t as w,N as ie,ad as ue,J as D,bP as de,bQ as pe}from"./index.9eb451d3.js";import"./JDictSelectTag.3b1f5a5e.js";import{_ as me}from"./JUpload.38683df0.js";import{j as ce,m as _e,n as fe,o as ve}from"./TsLeave.api.071e11ee.js";import"./BasicModal.a7306b6e.js";import"./useWindowSizeFn.ed181042.js";import"./FormItem.vue_vue_type_script_lang.1dbd23cc.js";import"./index.5df19bc8.js";import"./useFormItem.b38dda7e.js";import"./download.de7e8375.js";import"./base64Conver.bb012c73.js";import"./index.509a06e4.js";import"./index.dd61c578.js";import"./useCountdown.71e244f9.js";import"./api.632a718d.js";import"./props.d56cca40.js";import"./Tree.vue_vue_type_style_index_0_lang.1f840683.js";import"./useContextMenu.27080093.js";import"./index.e63dfd63.js";import"./onMountedOrActivated.bab7e2a6.js";import"./index.c61598b5.js";import"./htmlmixed.95cdf531.js";import"./vue.e841ff5e.js";import"./depart.api.03e31315.js";import"./index.5fc45d81.js";import"./EditOutlined.1cd3ad58.js";import"./functional.8b995981.js";import"./render.9a5e321f.js";import"./index.e3d374a0.js";const x=a=>(de("data-v-cdff323c"),a=a(),pe(),a),ge={class:"border"},ye=x(()=>n("span",{class:"title"},"\u5185\u5BB9\u8BE6\u60C5",-1)),Fe={class:"border"},Be=x(()=>n("span",{class:"title"},"\u5BA1\u6838\u610F\u89C1",-1)),Ae=D("\u901A\u8FC7"),ke=D("\u9A73\u56DE"),be={class:"border"},we=x(()=>n("span",{class:"title"},"\u5BA1\u6838\u65E5\u5FD7",-1)),xe={class:"content"},Ce=te({__name:"TsLeaveAuditModal",emits:["register","success"],setup(a,{emit:o}){const e={},B=g(null),f=g(null),A=g(!1),v=g(),d=oe({reason:"",file:null}),p={reason:[{required:!1,message:"\u8BF7\u8F93\u5165\u5BA1\u6279\u610F\u89C1",trigger:"blur"}]},c=g([]);let r;const[E,S]=Z({labelWidth:150,schemas:ce,showActionButtonGroup:!1}),{setProps:U,resetFields:V,setFieldsValue:P,validate:$,getFieldsValue:he}=S,[j,{setModalProps:Ie,closeModal:C}]=ae(i=>k(this,null,function*(){r=i.record,c.value=yield _e({orderId:r.orderId}),yield V(),se(()=>{P(T({},i.record)),setTimeout(()=>{$()},0)}),U({disabled:!0})}));function G(){return k(this,null,function*(){const i=yield v.value.validate();let l=[{id:r.id,taskId:r.taskId,orderId:r.orderId,reason:i.reason,displayName:r.displayName,args:r.args,file:i.file}];yield fe(l),C(),o("success")})}function q(){return k(this,null,function*(){const i=yield v.value.validate();let l=[{id:r.id,taskId:r.taskId,orderId:r.orderId,reason:i.reason,displayName:r.displayName,args:r.args,file:i.file}];yield ve(l),C(),o("success")})}return e["./tsLeaveAuditModalMixin.ts"]&&e["./tsLeaveAuditModalMixin.ts"].default({contentComponent:B,contentRef:f,isCustomModel:A}),(i,l)=>{const _=m("a-col"),z=m("a-textarea"),h=m("a-form-item"),I=m("a-button"),M=m("a-row"),J=m("a-timeline-item"),Q=m("a-timeline"),W=m("a-form");return y(),b(F(X),ue(i.$attrs,{onRegister:F(j),title:"\u5BA1\u6279",width:"70%",class:"audit",footer:null}),{default:s(()=>[t(M,{type:"flex"},{default:s(()=>[t(_,{flex:"70%",style:{"overflow-y":"auto"}},{default:s(()=>[n("div",ge,[ye,A.value?(y(),b(re(B.value),{key:0,ref_key:"contentRef",ref:f},null,512)):(y(),b(F(Y),{key:1,onRegister:F(E)},null,8,["onRegister"]))])]),_:1}),t(_,{flex:"30%"},{default:s(()=>[t(W,{ref_key:"formRef",ref:v,rules:p,model:d,"label-col":{span:0},"wrapper-col":{span:24}},{default:s(()=>[n("div",Fe,[Be,t(h,{label:"",prop:"reason"},{default:s(()=>[t(z,{value:d.reason,"onUpdate:value":l[0]||(l[0]=u=>d.reason=u),placeholder:"\u8BF7\u8F93\u5165\u5BA1\u6279\u610F\u89C1",rows:4},null,8,["value"])]),_:1}),t(h,{label:"",prop:"file"},{default:s(()=>[t(F(me),{value:d.file,"onUpdate:value":l[1]||(l[1]=u=>d.file=u)},null,8,["value"])]),_:1}),t(M,{type:"flex",justify:"space-between",style:{padding:"0 0 15px"}},{default:s(()=>[t(_,{span:4}),t(_,{span:4},{default:s(()=>[t(I,{type:"primary",onClick:l[2]||(l[2]=u=>G())},{default:s(()=>[Ae]),_:1})]),_:1}),t(_,{span:4},{default:s(()=>[t(I,{type:"danger",onClick:l[3]||(l[3]=u=>q())},{default:s(()=>[ke]),_:1})]),_:1}),t(_,{span:4})]),_:1})]),n("div",be,[we,n("div",xe,[t(Q,null,{default:s(()=>[(y(!0),le(ie,null,ne(c.value,(u,N)=>(y(),b(J,{color:N==0?"red":"blue",key:N},{default:s(()=>[n("p",null,"\u64CD\u4F5C\u4EBA\uFF1A"+w(u.createBy),1),n("p",null,"\u5BA1\u6838\u65F6\u95F4\uFF1A"+w(u.createTime),1),n("p",null,"\u8282\u70B9\uFF1A"+w(u.node),1),n("p",null,"\u610F\u89C1:"+w(u.remark),1)]),_:2},1032,["color"]))),128))]),_:1})])])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},16,["onRegister"])}}});var dt=ee(Ce,[["__scopeId","data-v-cdff323c"]]);export{dt as default};
