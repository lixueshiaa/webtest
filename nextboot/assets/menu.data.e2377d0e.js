import{a0 as n,bR as s,by as p,b6 as m}from"./index.9eb451d3.js";import{d as c}from"./user.api.c26e46a3.js";import{r as f}from"./componentMap.6942b0b6.js";import{r as h}from"./validator.cd75231b.js";const w=()=>n.get({url:"/sys/permission/list"}),S=(e,u)=>n.delete({url:"/sys/permission/delete",params:e},{joinParamsToUrl:!0}).then(()=>{u()}),T=(e,u)=>{s.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u6570\u636E",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:()=>n.delete({url:"/sys/permission/deleteBatch",data:e},{joinParamsToUrl:!0}).then(()=>{u()})})},I=(e,u)=>{let t=u?"/sys/permission/edit":"/sys/permission/add";return n.post({url:t,params:e})},P=e=>n.get({url:"/sys/permission/queryPermissionRule",params:e}),k=(e,u)=>{let t=u?"/sys/permission/editPermissionRule":"/sys/permission/addPermissionRule";return n.post({url:t,params:e})},R=(e,u)=>n.delete({url:"/sys/permission/deletePermissionRule",params:e},{joinParamsToUrl:!0}).then(()=>{u()}),F=e=>n.get({url:`/sys/dict/getDictItems/${e.code}`}),o=e=>e===-1,C=e=>e===0,l=e=>e===2;var E=(e=>(e.Default="layouts/default/index",e.IFrame="sys/iframe/FrameBlank",e))(E||{});const A=[{title:"\u83DC\u5355\u540D\u79F0",dataIndex:"name",width:200,align:"left"},{title:"\u83DC\u5355\u7C7B\u578B",dataIndex:"menuType",width:150,customRender:({text:e})=>f.renderDict(e,"menu_type")},{title:"\u56FE\u6807",dataIndex:"icon",width:50,customRender:({record:e})=>p(m,{icon:e.icon})},{title:"\u7EC4\u4EF6",dataIndex:"component",align:"left",width:150},{title:"\u8DEF\u5F84",dataIndex:"url",align:"left",width:150},{title:"\u6392\u5E8F",dataIndex:"sortNo",width:50}],x=[{label:"id",field:"id",component:"Input",show:!1},{field:"menuType",label:"\u83DC\u5355\u7C7B\u578B",component:"RadioButtonGroup",defaultValue:-1,componentProps:({formActionType:e})=>({options:[{label:"\u7CFB\u7EDF",value:-1},{label:"\u4E00\u7EA7\u83DC\u5355",value:0},{label:"\u5B50\u83DC\u5355",value:1},{label:"\u6309\u94AE/\u6743\u9650",value:2}],onChange:u=>{const{updateSchema:t,clearValidate:i}=e,a=l(u)?"\u6309\u94AE/\u6743\u9650":"\u83DC\u5355\u540D\u79F0";i(),t([{field:"name",label:a},{field:"url",required:!l(u)}])}})},{field:"name",label:"\u83DC\u5355\u540D\u79F0",component:"Input",required:!0},{field:"parentId",label:"\u4E0A\u7EA7\u83DC\u5355",component:"TreeSelect",required:!0,componentProps:{replaceFields:{title:"name",key:"id",value:"id"},dropdownStyle:{maxHeight:"50vh"},getPopupContainer:e=>e.parentNode},ifShow:({values:e})=>!o(e.menuType)},{field:"url",label:"\u8BBF\u95EE\u8DEF\u5F84",component:"Input",required:!0,ifShow:({values:e})=>!(e.component==="sys/iframe/FrameBlank"&&e.internalOrExternal)&&e.menuType!==2&&!o(e.menuType),dynamicRules:({model:e,schema:u})=>h.duplicateCheckRule("sys_permission","url",e,u,!0)},{field:"component",label:"\u524D\u7AEF\u7EC4\u4EF6",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u524D\u7AEF\u7EC4\u4EF6"},required:!0,ifShow:({values:e})=>!l(e.menuType)&&!o(e.menuType)},{field:"frameSrc",label:"Iframe\u5730\u5740",component:"Input",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Iframe\u5730\u5740"},{type:"url",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684url\u5730\u5740"}],ifShow:({values:e})=>!l(e.menuType)&&e.component==="sys/iframe/FrameBlank"},{field:"redirect",label:"\u9ED8\u8BA4\u8DF3\u8F6C\u5730\u5740",component:"Input",ifShow:({values:e})=>C(e.menuType)},{field:"perms",label:"\u6388\u6743\u6807\u8BC6",component:"Input",ifShow:({values:e})=>l(e.menuType),dynamicRules:({model:e})=>[{required:!1,validator:(u,t)=>new Promise((i,a)=>{let d={tableName:"sys_permission",fieldName:"perms",fieldVal:t,dataId:e.id};c(d).then(r=>{r.success?i():a(r.message||"\u6821\u9A8C\u5931\u8D25")}).catch(r=>{a(r.message||"\u6821\u9A8C\u5931\u8D25")})})}]},{field:"permsType",label:"\u6388\u6743\u7B56\u7565",component:"RadioGroup",defaultValue:"1",helpMessage:["\u53EF\u89C1/\u53EF\u8BBF\u95EE(\u6388\u6743\u540E\u53EF\u89C1/\u53EF\u8BBF\u95EE)","\u53EF\u7F16\u8F91(\u672A\u6388\u6743\u65F6\u7981\u7528)"],componentProps:{options:[{label:"\u53EF\u89C1/\u53EF\u8BBF\u95EE",value:"1"},{label:"\u53EF\u7F16\u8F91",value:"2"}]},ifShow:({values:e})=>l(e.menuType)},{field:"systemType",label:"\u7CFB\u7EDF\u7C7B\u578B",component:"Select",componentProps:{options:[{label:"pc\u7AEF",value:"pc"},{label:"\u79FB\u52A8\u7AEF",value:"yd"}]},required:({values:e})=>o(e.menuType),show:({values:e})=>o(e.menuType),dynamicDisabled:({values:e})=>!o(e.menuType)},{field:"status",label:"\u72B6\u6001",component:"RadioGroup",defaultValue:"1",componentProps:{options:[{label:"\u6709\u6548",value:"1"},{label:"\u65E0\u6548",value:"0"}]},ifShow:({values:e})=>l(e.menuType)},{field:"icon",label:"\u83DC\u5355\u56FE\u6807",component:"IconPicker",ifShow:({values:e})=>!l(e.menuType)},{field:"sortNo",label:"\u6392\u5E8F",component:"InputNumber",defaultValue:1,ifShow:({values:e})=>!l(e.menuType)},{field:"route",label:"\u662F\u5426\u8DEF\u7531\u83DC\u5355",component:"Switch",defaultValue:!0,componentProps:{checkedChildren:"\u662F",unCheckedChildren:"\u5426"},ifShow:({values:e})=>!l(e.menuType)||!o(e.menuType)},{field:"hidden",label:"\u9690\u85CF\u8DEF\u7531",component:"Switch",defaultValue:0,componentProps:{checkedChildren:"\u662F",unCheckedChildren:"\u5426"},ifShow:({values:e})=>!l(e.menuType)},{field:"hideTab",label:"\u9690\u85CFTab",component:"Switch",defaultValue:0,componentProps:{checkedChildren:"\u662F",unCheckedChildren:"\u5426"},ifShow:({values:e})=>!l(e.menuType)},{field:"keepAlive",label:"\u662F\u5426\u7F13\u5B58\u8DEF\u7531",component:"Switch",defaultValue:!1,componentProps:{checkedChildren:"\u662F",unCheckedChildren:"\u5426"},ifShow:({values:e})=>!l(e.menuType)},{field:"alwaysShow",label:"\u805A\u5408\u8DEF\u7531",component:"Switch",defaultValue:!1,componentProps:{checkedChildren:"\u662F",unCheckedChildren:"\u5426"},ifShow:({values:e})=>!l(e.menuType)},{field:"internalOrExternal",label:"\u6253\u5F00\u65B9\u5F0F",component:"Switch",defaultValue:!1,componentProps:{checkedChildren:"\u5916\u90E8",unCheckedChildren:"\u5185\u90E8"},ifShow:({values:e})=>!l(e.menuType)}],g=[{title:"\u89C4\u5219\u540D\u79F0",dataIndex:"ruleName",width:150},{title:"\u89C4\u5219\u5B57\u6BB5",dataIndex:"ruleColumn",width:100},{title:"\u89C4\u5219\u503C",dataIndex:"ruleValue",width:100}],V=[{field:"ruleName",label:"\u89C4\u5219\u540D\u79F0",component:"Input",colProps:{span:6}},{field:"ruleValue",label:"\u89C4\u5219\u503C",component:"Input",colProps:{span:6}}],v=[{label:"id",field:"id",component:"Input",show:!1},{field:"ruleName",label:"\u89C4\u5219\u540D\u79F0",component:"Input",required:!0},{field:"ruleColumn",label:"\u89C4\u5219\u5B57\u6BB5",component:"Input",ifShow:({values:e})=>e.ruleConditions!=="USE_SQL_RULES"},{field:"ruleConditions",label:"\u6761\u4EF6\u89C4\u5219",required:!0,component:"ApiSelect",componentProps:{api:F,params:{code:"rule_conditions"},labelField:"text",valueField:"value",getPopupContainer:e=>document.body}},{field:"ruleValue",label:"\u89C4\u5219\u503C",component:"Input",required:!0},{field:"status",label:"\u72B6\u6001",component:"RadioButtonGroup",defaultValue:"1",componentProps:{options:[{label:"\u65E0\u6548",value:"0"},{label:"\u6709\u6548",value:"1"}]}}];export{E as C,g as a,V as b,R as c,P as d,v as e,A as f,T as g,S as h,x as i,I as j,w as l,k as s};
