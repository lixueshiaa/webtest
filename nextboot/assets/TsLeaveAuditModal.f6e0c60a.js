var z=Object.defineProperty;var x=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var C=(a,t,e)=>t in a?z(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,M=(a,t)=>{for(var e in t||(t={}))J.call(t,e)&&C(a,e,t[e]);if(x)for(var e of x(t))Q.call(t,e)&&C(a,e,t[e]);return a};var F=(a,t,e)=>new Promise((m,v)=>{var g=i=>{try{_(e.next(i))}catch(f){v(f)}},s=i=>{try{_(e.throw(i))}catch(f){v(f)}},_=i=>i.done?m(i.value):Promise.resolve(i.value).then(g,s);_((e=e.apply(a,t)).next())});import{B as W}from"./index.7aa87f83.js";import{B as H}from"./BasicForm.7ed18e1d.js";import"./componentMap.801737ea.js";import{u as K}from"./useForm.f6b94960.js";import"./RadioButtonGroup.dc9fedf3.js";import{a1 as O,a as X,z as N,B as Y,bg as Z,an as ee,U as d,o as A,k as T,G as r,p as o,n as l,j as B,i as te,a9 as oe,t as y,N as ae,ad as se,J as R,bP as re,bQ as le}from"./index.0c676cb0.js";import"./JDictSelectTag.b196d7c6.js";import"./JUpload.2c84d159.js";import{j as ne,m as ie,n as ue,o as pe}from"./TsLeave.api.56db3269.js";import"./BasicModal.6a1e781a.js";import"./useWindowSizeFn.f69fad46.js";import"./FormItem.vue_vue_type_script_lang.3f5bf9fa.js";import"./index.95c15ee4.js";import"./useFormItem.47fc2179.js";import"./download.2d6dcb07.js";import"./base64Conver.bb012c73.js";import"./index.b5b26116.js";import"./index.32a34a9d.js";import"./useCountdown.df5930af.js";import"./api.6d7ba78d.js";import"./props.acb18fde.js";import"./Tree.vue_vue_type_style_index_0_lang.9a87433c.js";import"./useContextMenu.8ed3a346.js";import"./index.008cf2db.js";import"./onMountedOrActivated.29514295.js";import"./index.a5c5d78d.js";import"./htmlmixed.604e57c2.js";import"./vue.1c47a5ee.js";import"./depart.api.904c0734.js";import"./index.ea661fe9.js";import"./EditOutlined.7e0ce9a3.js";import"./functional.51da07bc.js";import"./render.6feafcd2.js";import"./index.e3d374a0.js";const h=a=>(re("data-v-64a5cc5a"),a=a(),le(),a),de={class:"border"},ce=h(()=>l("span",{class:"title"},"\u5185\u5BB9\u8BE6\u60C5",-1)),me={class:"border"},_e=h(()=>l("span",{class:"title"},"\u5BA1\u6838\u610F\u89C1",-1)),fe=R("\u901A\u8FC7"),ve=R("\u9A73\u56DE"),ge={class:"border"},Fe=h(()=>l("span",{class:"title"},"\u5BA1\u6838\u65E5\u5FD7",-1)),Be={class:"content"},ye=X({__name:"TsLeaveAuditModal",emits:["register","success"],setup(a,{emit:t}){const e=N(),m=Y({reason:""}),v={reason:[{required:!1,message:"\u8BF7\u8F93\u5165\u5BA1\u6279\u610F\u89C1",trigger:"blur"}]},g=N([]);let s;const[_,i]=K({labelWidth:150,schemas:ne,showActionButtonGroup:!1}),{setProps:f,resetFields:D,setFieldsValue:E,validate:L,getFieldsValue:Ae}=i,[S,{setModalProps:he,closeModal:w}]=Z(u=>F(this,null,function*(){s=u.record,g.value=yield ie({orderId:s.orderId}),yield D(),ee(()=>{E(M({},u.record)),setTimeout(()=>{L()},0)}),f({disabled:!0})}));function V(){return F(this,null,function*(){const u=yield e.value.validate();let n=[{id:s.id,taskId:s.taskId,orderId:s.orderId,reason:u.reason,displayName:s.displayName,args:s.args}];yield ue(n),w(),t("success")})}function P(){return F(this,null,function*(){const u=yield e.value.validate();let n=[{id:s.id,taskId:s.taskId,orderId:s.orderId,reason:u.reason,displayName:s.displayName,args:s.args}];yield pe(n),w(),t("success")})}return(u,n)=>{const c=d("a-col"),U=d("a-textarea"),j=d("a-form-item"),b=d("a-button"),I=d("a-row"),$=d("a-timeline-item"),G=d("a-timeline"),q=d("a-form");return A(),T(B(W),se(u.$attrs,{onRegister:B(S),title:"\u5BA1\u6279",width:"70%",class:"audit",footer:null}),{default:r(()=>[o(I,{type:"flex"},{default:r(()=>[o(c,{flex:"70%",style:{"overflow-y":"auto"}},{default:r(()=>[l("div",de,[ce,o(B(H),{onRegister:B(_)},null,8,["onRegister"])])]),_:1}),o(c,{flex:"30%"},{default:r(()=>[o(q,{ref_key:"formRef",ref:e,rules:v,model:m,"label-col":{span:0},"wrapper-col":{span:24}},{default:r(()=>[l("div",me,[_e,o(j,{label:"",prop:"reason"},{default:r(()=>[o(U,{value:m.reason,"onUpdate:value":n[0]||(n[0]=p=>m.reason=p),placeholder:"\u8BF7\u8F93\u5165\u5BA1\u6279\u610F\u89C1",rows:4},null,8,["value"])]),_:1}),o(I,{type:"flex",justify:"space-between",style:{padding:"0 0 15px"}},{default:r(()=>[o(c,{span:4}),o(c,{span:4},{default:r(()=>[o(b,{type:"primary",onClick:n[1]||(n[1]=p=>V())},{default:r(()=>[fe]),_:1})]),_:1}),o(c,{span:4},{default:r(()=>[o(b,{type:"danger",onClick:n[2]||(n[2]=p=>P())},{default:r(()=>[ve]),_:1})]),_:1}),o(c,{span:4})]),_:1})]),l("div",ge,[Fe,l("div",Be,[o(G,null,{default:r(()=>[(A(!0),te(ae,null,oe(g.value,(p,k)=>(A(),T($,{color:k==0?"red":"blue",key:k},{default:r(()=>[l("p",null,"\u64CD\u4F5C\u4EBA\uFF1A"+y(p.createBy),1),l("p",null,"\u5BA1\u6838\u65F6\u95F4\uFF1A"+y(p.createTime),1),l("p",null,"\u8282\u70B9\uFF1A"+y(p.node),1),l("p",null,"\u610F\u89C1:"+y(p.remark),1)]),_:2},1032,["color"]))),128))]),_:1})])])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},16,["onRegister"])}}});var st=O(ye,[["__scopeId","data-v-64a5cc5a"]]);export{st as default};
