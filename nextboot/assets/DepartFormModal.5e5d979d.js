var P=Object.defineProperty;var y=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var D=(e,u,o)=>u in e?P(e,u,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[u]=o,b=(e,u)=>{for(var o in u||(u={}))A.call(u,o)&&D(e,o,u[o]);if(y)for(var o of y(u))S.call(u,o)&&D(e,o,u[o]);return e};var F=(e,u,o)=>new Promise((n,i)=>{var d=t=>{try{l(o.next(t))}catch(p){i(p)}},f=t=>{try{l(o.throw(t))}catch(p){i(p)}},l=t=>t.done?n(t.value):Promise.resolve(t.value).then(d,f);l((o=o.apply(e,u)).next())});import{B as v}from"./BasicForm.d1b5a4f4.js";import"./componentMap.6942b0b6.js";import{u as T}from"./useForm.26fd4105.js";import"./RadioButtonGroup.6d9641c3.js";import{a0 as m,a as _,b4 as I,z as h,f as M,bg as O,j as s,o as x,k as j,G as k,p as q,ad as R}from"./index.9eb451d3.js";import"./JDictSelectTag.3b1f5a5e.js";import"./JUpload.38683df0.js";import{B as N}from"./index.9788db2e.js";const U=(e,u)=>u?m.put({url:"/sys/sysDepart/edit",params:e}):m.post({url:"/sys/sysDepart/add",params:e}),Y=e=>m.get({url:"/sys/sysDepart/queryDepartTreeSync",params:e}),Z=e=>m.get({url:"/sys/sysDepart/searchBy",params:e});function z(){return{basicFormSchema:[{field:"departName",label:"\u7EC4\u7EC7\u540D\u79F0",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u673A\u6784/\u7EC4\u7EC7\u540D\u79F0"},rules:[{required:!0,message:"\u7EC4\u7EC7\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]},{field:"parentId",label:"\u4E0A\u7EA7\u7EC4\u7EC7",component:"TreeSelect",componentProps:{treeData:[],placeholder:"\u65E0",dropdownStyle:{maxHeight:"200px",overflow:"auto"}}},{field:"orgCode",label:"\u673A\u6784\u7F16\u7801",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u673A\u6784\u7F16\u7801"}},{field:"orgCategory",label:"\u7EC4\u7EC7\u7C7B\u578B",component:"JDictSelectTag",componentProps:{dictCode:"orgCategory"}},{field:"departOrder",label:"\u6392\u5E8F",component:"InputNumber",componentProps:{}},{field:"newTenant",label:"\u662F\u5426\u65B0\u589E\u79DF\u6237",component:"Select",componentProps:{options:[{label:"\u662F",value:"1"},{label:"\u5426",value:"0"}]},rules:[{required:!0,message:"\u662F\u5426\u65B0\u589E\u79DF\u6237\u4E0D\u80FD\u4E3A\u7A7A"}]},{field:"mobile",label:"\u7535\u8BDD",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD"}},{field:"fax",label:"\u4F20\u771F",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u4F20\u771F"}},{field:"address",label:"\u5730\u5740",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5730\u5740"}},{field:"memo",label:"\u5907\u6CE8",component:"InputTextArea",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"}}]}}const G=_({__name:"DepartFormModal",props:{rootTreeData:{type:Array,default:()=>[]}},emits:["success","register"],setup(e,{emit:u}){const o=e;I("prefixCls");const n=h(!1),i=h({}),d=M(()=>n.value?"\u7F16\u8F91":"\u65B0\u589E"),[f,{resetFields:l,setFieldsValue:t,validate:p,updateSchema:C}]=T({schemas:z().basicFormSchema,showActionButtonGroup:!1}),[B,{setModalProps:g,closeModal:E}]=O(r=>F(this,null,function*(){yield l(),n.value=s(r==null?void 0:r.isUpdate);let c=s(r==null?void 0:r.isChild);C([{field:"parentId",show:c,componentProps:{disabled:c,treeData:o.rootTreeData}},{field:"orgCode",show:!1},{field:"newTenant",show:!c,componentProps:{disabled:c}}]);let a=s(r==null?void 0:r.record);typeof a!="object"&&(a={}),a=Object.assign({departOrder:0,orgCategory:"1",newTenant:"0"},a),i.value=a,yield t(b({},a))}));function w(){return F(this,null,function*(){try{g({confirmLoading:!0});let r=yield p();yield U(r,n.value),E(),u("success")}finally{g({confirmLoading:!1})}})}return(r,c)=>(x(),j(s(N),R({title:s(d),width:800},r.$attrs,{onOk:w,onRegister:s(B)}),{default:k(()=>[q(s(v),{onRegister:s(f)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});var ee=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}));export{ee as D,G as _,Y as q,Z as s};
