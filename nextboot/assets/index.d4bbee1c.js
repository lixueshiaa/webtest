var c=(l,i,a)=>new Promise((t,o)=>{var u=e=>{try{s(a.next(e))}catch(r){o(r)}},d=e=>{try{s(a.throw(e))}catch(r){o(r)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(u,d);s((a=a.apply(l,i)).next())});import{B}from"./index.7ab28a2b.js";import{a0 as h,a as M,z as p,bg as w,U as f,o as x,k as C,G as _,p as m,ad as E,j as v}from"./index.397c0bf9.js";import"./BasicModal.1ff6964e.js";import"./useWindowSizeFn.830b179a.js";const b=()=>h.get({url:"/onlForm/api/rootFile"}),D=l=>h.get({url:"/onlForm/api/fileTree",params:l}),G=M({__name:"index",emits:["register","success"],setup(l,{emit:i}){const a=p(!1),t=p([]),o=p(""),[u,{closeModal:d}]=w(()=>c(this,null,function*(){o.value="",t.value.length===0&&s()}));function s(){return c(this,null,function*(){a.value=!0,t.value=yield b(),a.value=!1})}function e(n){return c(this,null,function*(){if(n.dataRef.children)return;let g={parentPath:n.dataRef.key};n.dataRef.children=yield D(g),t.value=[...t.value]})}function r(n){o.value=n[0]}function y(){i("success",o.value),d()}return(n,g)=>{const R=f("a-directory-tree"),k=f("a-spin"),F=f("a-space");return x(),C(v(B),E(n.$attrs,{onRegister:v(u),title:"\u9009\u62E9\u76EE\u5F55",onOk:y}),{default:_(()=>[m(F,null,{default:_(()=>[m(k,{spinning:a.value},{default:_(()=>[m(R,{"tree-data":t.value,"load-data":e,onSelect:r},null,8,["tree-data"])]),_:1},8,["spinning"])]),_:1})]),_:1},16,["onRegister"])}}});export{G as default};
