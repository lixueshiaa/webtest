var L=Object.defineProperty,W=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var D=(t,e,o)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,h=(t,e)=>{for(var o in e||(e={}))z.call(e,o)&&D(t,o,e[o]);if(I)for(var o of I(e))q.call(e,o)&&D(t,o,e[o]);return t},y=(t,e)=>W(t,V(e));var S=(t,e,o)=>new Promise((c,a)=>{var m=n=>{try{i(o.next(n))}catch(s){a(s)}},d=n=>{try{i(o.throw(n))}catch(s){a(s)}},i=n=>n.done?c(n.value):Promise.resolve(n.value).then(m,d);i((o=o.apply(t,e)).next())});import{B as G}from"./BasicTable.ebe28ef2.js";import{T as J}from"./componentMap.801737ea.js";import"./TableImg.a4c65e1f.js";import{u as Q}from"./useTable.db680d93.js";import{b as X,bO as Y,z as A,B as Z,T as ee,a0 as E,bR as te,by as H,a as oe,bg as ne,an as ue,bj as re,U as _,o as M,i as ae,p as f,G as p,j as g,k as ie,l as le,ad as ce,N as se,J as T}from"./index.0c676cb0.js";import{B as de}from"./index.7aa87f83.js";import{b as me,o as fe,a as pe,_ as he}from"./index.65770850.js";import"./BasicForm.7ed18e1d.js";import"./FormItem.vue_vue_type_script_lang.3f5bf9fa.js";import"./BasicModal.6a1e781a.js";import"./useWindowSizeFn.f69fad46.js";import"./useForm.f6b94960.js";import"./RadioButtonGroup.dc9fedf3.js";import"./useFormItem.47fc2179.js";import"./JDictSelectTag.b196d7c6.js";import"./JUpload.2c84d159.js";import"./api.6d7ba78d.js";import"./functional.51da07bc.js";import"./index.7910eff5.js";import"./onMountedOrActivated.29514295.js";import"./useContentViewHeight.3c3f37af.js";import"./FormOutlined.f1bb593e.js";import"./useSortable.29b10662.js";import"./index.95c15ee4.js";import"./download.2d6dcb07.js";import"./base64Conver.bb012c73.js";import"./index.b5b26116.js";import"./index.32a34a9d.js";import"./useCountdown.df5930af.js";import"./props.acb18fde.js";import"./Tree.vue_vue_type_style_index_0_lang.9a87433c.js";import"./useContextMenu.8ed3a346.js";import"./index.008cf2db.js";import"./index.a5c5d78d.js";import"./htmlmixed.604e57c2.js";import"./vue.1c47a5ee.js";import"./depart.api.904c0734.js";import"./index.ea661fe9.js";import"./EditOutlined.7e0ce9a3.js";function ge(t){const e=ee();let o={};t.designScope&&(o=X(t.designScope));const c=be(t.tableProps),[,{reload:a,setLoading:m},{selectedRowKeys:d}]=c;function i(s,u){return new Promise((r,b)=>{var x;const C=()=>S(this,null,function*(){var w,B;try{m(!0);const F=yield s();((w=u==null?void 0:u.reload)==null||w)&&a(),((B=u==null?void 0:u.clearSelection)==null||B)&&(d.value=[]),r(F)}catch(F){b(F)}finally{m(!1)}});(x=u==null?void 0:u.confirm)==null||x?e.createConfirm({iconType:"warning",title:"\u5220\u9664",content:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",onOk:()=>C(),onCancel:()=>b()}):C()})}function n(s){return i(s,{confirm:!1,clearSelection:!1})}return y(h(h({},o),e),{doRequest:i,doDeleteRecord:n,tableContext:c})}function be(t){var n,s,u;const e={xs:24,sm:12,md:12,lg:8,xl:8,xxl:6},o={rowKey:"id",useSearchForm:!0,formConfig:{compact:!0,labelWidth:120,autoSubmitOnEnter:!0,rowProps:{gutter:8},baseColProps:h({},e),labelCol:{xs:24,sm:8,md:6,lg:8,xl:6,xxl:6},wrapperCol:{},showAdvancedButton:!0,autoAdvancedCol:3,actionColOptions:y(h({},e),{style:{textAlign:"left"}})},striped:!0,canResize:!0,minHeight:500,clickToRowSelect:!1,bordered:!0,showIndexColumn:!1,showTableSetting:!0,tableSetting:{fullScreen:!0},showActionColumn:!0,actionColumn:{width:120,title:"\u64CD\u4F5C",fixed:!1,dataIndex:"action",slots:{customRender:"action"}}};t&&Y(o,t);function c(r){return Object.assign({column:"orderNum",order:"asc"},r)}Object.assign(o,{beforeFetch:c}),typeof t.beforeFetch=="function"&&(o.beforeFetch=function(r){return r=c(r),t.beforeFetch(r),r});const a=A([]),m=A([]),d=(n=t==null?void 0:t.rowSelection)!=null?n:{},i=Z(y(h({},d),{type:(s=d.type)!=null?s:"checkbox",columnWidth:(u=d.columnWidth)!=null?u:50,selectedRows:m,selectedRowKeys:a,onChange(...r){a.value=r[0],m.value=r[1],typeof d.onChange=="function"&&d.onChange(...r)}}));return delete o.rowSelection,[...Q(o),{selectedRows:m,selectedRowKeys:a,rowSelection:i}]}const Fe=[{title:"\u6309\u94AE\u7F16\u7801",dataIndex:"buttonCode"},{title:"\u6309\u94AE\u540D\u79F0",dataIndex:"buttonName"},{title:"\u6309\u94AE\u6837\u5F0F",dataIndex:"buttonStyle",customRender({text:t}){const e=me.find(o=>o.value===t);return e?e.label:""}},{title:"\u6309\u94AE\u7C7B\u578B",dataIndex:"optType",customRender({text:t}){const e=fe.find(o=>o.value===t);return e?e.label:""}},{title:"\u6392\u5E8F",dataIndex:"orderNum"},{title:"\u6309\u94AE\u56FE\u6807",dataIndex:"buttonIcon"},{title:"\u8868\u8FBE\u5F0F",dataIndex:"exp"},{title:"\u6309\u94AE\u72B6\u6001",dataIndex:"buttonStatus",width:100,customRender({text:t}){const e=pe.find(o=>o.value===t);return e?e.label:""}}],_e=t=>e=>E.get({url:`/onlForm/onlFormButton/list/${t}`,params:e}),Ce=(t,e)=>E.delete({url:"/onlForm/onlFormButton/deleteBatch",data:t},{joinParamsToUrl:!0}).then(()=>{e()}),xe=(t,e)=>{te.confirm({title:"\u5220\u9664",centered:!0,closable:!0,content:()=>H("div",{style:{color:"#333"}},[H("p",{style:{marginBottom:"4px"}},"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F")]),onOk:()=>E.delete({url:"/onlForm/onlFormButton/deleteBatch",data:t},{joinParamsToUrl:!0}).then(()=>{e()})})},we=T(" \u65B0\u589E"),Be=T(" \u5220\u9664 "),ye=T("\u6279\u91CF\u64CD\u4F5C "),mt=oe({__name:"index",setup(t){let e=300;e=(document.documentElement.clientHeight||document.body.clientHeight)-335;const c=A([]);let a="";const{tableContext:m}=ge({designScope:"online-custom-btn-list-template",tableProps:{columns:[],maxHeight:e,useSearchForm:!1,actionColumn:{width:120}}}),[d,{reload:i,setProps:n}]=m,[s,{setModalProps:u}]=ne(l=>S(this,null,function*(){u({confirmLoading:!1,minHeight:80}),a=l.id,n({api:_e(a),columns:Fe,useSearchForm:!1}),ue(()=>{i()})})),[r,b]=re(),C={type:"checkbox",columnWidth:50,selectedRowKeys:c,onChange:x};function x(l){c.value=l}function w(){xe({ids:c.value.join(",")},i)}function B(l){Ce({ids:l.id},i)}function F(){b.openModal(!0,{isUpdate:!1,cgformHeadId:a})}function O(l){b.openModal(!0,{isUpdate:!0,cgformHeadId:a,record:l})}function N(){i()}function j(l){return[{label:"\u5220\u9664",color:"error",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:B.bind(null,l)}}]}function $(l){return[{label:"\u7F16\u8F91",onClick:O.bind(null,l)}]}return(l,Se)=>{const R=_("a-button"),k=_("Icon"),K=_("a-menu-item"),P=_("a-menu"),U=_("a-dropdown");return M(),ae(se,null,[f(g(de),ce(l.$attrs,{onRegister:g(s),title:"\u81EA\u5B9A\u4E49\u6309\u94AE",showCancelBtn:!0,showOkBtn:!1,cancelText:"\u5173\u95ED"}),{default:p(()=>[f(g(G),{onRegister:g(d),rowSelection:C},{tableTitle:p(()=>[f(R,{type:"primary",preIcon:"ant-design:plus",onClick:F},{default:p(()=>[we]),_:1}),c.value.length>0?(M(),ie(U,{key:0},{overlay:p(()=>[f(P,null,{default:p(()=>[f(K,{key:"1",onClick:w},{default:p(()=>[f(k,{icon:"ant-design:delete-outlined"}),Be]),_:1})]),_:1})]),default:p(()=>[f(R,null,{default:p(()=>[ye,f(k,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):le("",!0)]),action:p(({record:v})=>[f(g(J),{actions:$(v),dropDownActions:j(v)},null,8,["actions","dropDownActions"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister"]),f(he,{width:650,onRegister:g(r),onSuccess:N},null,8,["onRegister"])],64)}}});export{mt as default};
