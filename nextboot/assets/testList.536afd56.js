var re=Object.defineProperty,se=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var j=(a,l,n)=>l in a?re(a,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[l]=n,V=(a,l)=>{for(var n in l||(l={}))pe.call(l,n)&&j(a,n,l[n]);if(Y)for(var n of Y(l))ce.call(l,n)&&j(a,n,l[n]);return a},N=(a,l)=>se(a,de(l));var I=(a,l,n)=>new Promise((k,b)=>{var B=i=>{try{_(n.next(i))}catch(C){b(C)}},A=i=>{try{_(n.throw(i))}catch(C){b(C)}},_=i=>i.done?k(i.value):Promise.resolve(i.value).then(B,A);_((n=n.apply(a,l)).next())});import{B as me}from"./BasicTable.5bdcd073.js";import{J as he,T as _e}from"./componentMap.bdddb878.js";import"./TableImg.ceb3addb.js";import"./index.f8f2ddf0.js";import{u as fe}from"./useListPage.8a0ab0f8.js";import Fe from"./testAuditModal.980b79cf.js";import{c as ye,s as be}from"./test.data.f1577ce7.js";import{a as J,z as E,ea as h,bw as Ce,bj as X,j as s,bO as O,U as f,o as c,i as F,p as d,G as u,N as w,a9 as ge,k as x,J as y,t as z,l as S,n as De,Q as R}from"./index.6cf4d174.js";import{l as ke,g as Be,a as Ee,d as we,b as xe}from"./test.api.a1b1aabb.js";import"./BasicForm.74bae903.js";import"./RadioButtonGroup.e396598a.js";import"./JDictSelectTag.77cd1e49.js";import"./JUpload.a8971a82.js";import{_ as Ae}from"./NextEditorTable.290bb009.js";import"./useForm.0a8b633b.js";import"./index.28df25ce.js";import"./onMountedOrActivated.c1705977.js";import"./useWindowSizeFn.99e468e7.js";import"./useContentViewHeight.183e9878.js";import"./FormOutlined.478bac7f.js";import"./BasicModal.45214da2.js";import"./useSortable.746d5656.js";import"./index.e9415cf9.js";import"./useFormItem.ed1b0f05.js";import"./download.61ffebe5.js";import"./base64Conver.bb012c73.js";import"./index.260e697f.js";import"./index.10fcd82b.js";import"./useCountdown.5a1a5b16.js";import"./api.4a4df057.js";import"./props.932becef.js";import"./Tree.vue_vue_type_style_index_0_lang.dd81644b.js";import"./useContextMenu.988cb2d7.js";import"./index.d3e30781.js";import"./index.f170d56c.js";import"./htmlmixed.9b0e93d2.js";import"./vue.94c7f829.js";import"./depart.api.cb5ba1c2.js";import"./index.410f2d77.js";import"./EditOutlined.ebbc06a3.js";import"./useTable.5c9bbf6b.js";import"./render.e804ff54.js";import"./index.e3d374a0.js";import"./FormItem.vue_vue_type_script_lang.0f2a80c5.js";import"./functional.4d9308b0.js";const ve=y("\u6253\u5370\u65E5\u5FD7"),Me=y(" \u5220\u9664 "),Te=y("\u6279\u91CF\u64CD\u4F5C "),Ie=["innerHTML"],Se={key:0,style:{"font-size":"12px","font-style":"italic"}},Re=y("\u4E0B\u8F7D"),Ue=J({name:"aUser21-aUser21"}),Mt=J(N(V({},Ue),{setup(a){const l={},n=["date","startDate","endDate","areaRange"],k=E([{label:"\u65B0\u589E",methods:"handleAdd",preIcon:"ant-design:plus-outlined"},{label:"\u5BFC\u51FA",methods:"onExportXls",preIcon:"ant-design:export-outlined"},{label:"\u5BFC\u5165",methods:"onImportXls",preIcon:"ant-design:import-outlined",btnType:"import"},{label:"\u5BA1\u6279\u901A\u8FC7",methods:"allow",preIcon:""}]),b=E([{label:"\u7F16\u8F91",methods:"handleEdit"}]),B=E([{label:"\u8BE6\u60C5",methods:"handleDetail"},{label:"\u5220\u9664",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",methods:"handleDelete"}},{label:"\u5BA1\u6838",methods:"handleAudit"},{label:"\u62D2\u7EDD",methods:"rejuct"}]),A=[{title:"\u5B57\u6BB5\u540D\u79F0",key:"dbFieldName",type:h.input,placeholder:"\u8BF7\u8F93\u5165${title}"},{title:"\u9875\u9762\u540D\u79F0",key:"dbFieldTxt",type:h.textarea,placeholder:"\u8BF7\u8F93\u5165${title}"},{title:"\u90E8\u95E8\u9009\u62E9",key:"departSelect",type:h.departSelect,placeholder:"\u8BF7\u8F93\u5165${title}"},{title:"\u7528\u6237\u9009\u62E9",key:"userSelect",type:h.userSelect,placeholder:"\u8BF7\u8F93\u5165${title}"},{title:"time",key:"time",type:h.time,placeholder:"\u8BF7\u8F93\u5165${title}"},{title:"\u63A7\u4EF6\u7C7B\u578B",key:"queryShowType",type:h.select,placeholder:"\u8BF7\u9009\u62E9${title}",options:[{title:"\u6587\u672C\u6846",value:"text"},{title:"\u6570\u5B57\u6846",value:"number"},{title:"\u65E5\u671F(yyyy-MM-dd)",value:"date"}]},{title:"\u65F6\u95F4",key:"datetimes",type:h.datetime,placeholder:"\u8BF7\u8F93\u5165${title}"}],_=E([]),i={handleAdd:function(){v(!0,{action:"add"})},handleEdit:function(e){v(!0,{record:e,action:"editor"})},handleDetail:function(e){v(!0,{record:e,action:"detail"})},handleDelete:function(e){return I(this,null,function*(){yield we({id:e.id},T)})},handleAudit:function(e){q(!0,{action:"audit",record:e})}},{currentRoute:C}=Ce(),[$e,{openModal:v}]=X(),[L,{openModal:q}]=X(),{prefixCls:Ye,tableContext:H,onExportXls:P,onImportXls:G}=fe({tableProps:{title:"\u65E5\u671F\u533A\u95F4\u7EC4\u4EF6",api:ke,columns:ye,canResize:!0,beforeFetch:e=>{const r=W(),o=s(C).query||{},m=r.getFieldsValue(),p=O(o,m,e);return Object.assign(e,p),Object.keys(e).map(g=>{for(let D=0;D<n.length;D++)e[n[D]]=void 0;(e[g]===""||e[g]===null)&&(e[g]=void 0)}),e},formConfig:{labelWidth:120,schemas:be,autoSubmitOnEnter:!0,showAdvancedButton:!0,fieldMapToTime:[["startDate",["startDate_begin","startDate_end"],"YYYY-MM-DD"],["endDate",["endDate_begin","endDate_end"],"YYYY-MM-DD"]]},actionColumn:{width:120}},exportConfig:{name:"\u65E5\u671F\u533A\u95F4\u7EC4\u4EF6",url:Be},importConfig:{url:Ee,success:T}});i.onExportXls=P,i.onImportXls=G;const[K,U,$]=H,{reload:Q,getForm:W}=U,{rowSelection:Z,selectedRowKeys:M}=$;function ee(){return I(this,null,function*(){yield xe({ids:M.value},T)})}function te(){}function oe(e){}function T(){(M.value=[])&&Q()}function ne(){return s(k).map(e=>{const r=R(e),o=r.methods;return r.onClick=()=>{i[o]&&i[o]()},r})}function ie(e){return s(b).map(r=>{const o=R(r),m=o.methods;return o.onClick=i[m].bind(null,e),o})}function le(e){return s(B).map(r=>{const o=R(r),m=o.methods,p=O({},o.popConfirm||{});return p.methods?(p.confirm=i[p.methods]&&i[p.methods].bind(null,e),o.popConfirm=p):m&&(o.onClick=i[m]&&i[m].bind(null,e)),o})}return l["./aUser21Mixin.ts"]&&l["./aUser21Mixin.ts"].default({methods:i,actionBtns:b,dropDownActionBtns:B,titleBtns:k,tableMethods:U,selections:$}),(e,r)=>{const o=f("a-button"),m=f("j-upload-button"),p=f("Icon"),g=f("a-menu-item"),D=f("a-menu"),ue=f("a-dropdown");return c(),F("div",null,[d(o,{onClick:te},{default:u(()=>[ve]),_:1}),d(Ae,{value:_.value,"onUpdate:value":r[0]||(r[0]=t=>_.value=t),columns:A},null,8,["value"]),d(s(he),{code:"demo",fieldConfig:[{source:"name",target:"popup"},{source:"sex",target:"popup_sex"},{source:"age",target:"popup_age"}],"onUpdate:value":oe}),d(s(me),{onRegister:s(K),rowSelection:s(Z)},{tableTitle:u(()=>[(c(!0),F(w,null,ge(ne(),(t,ae)=>(c(),F(w,null,[t.btnType==="import"?(c(),F(w,{key:0},[t.ifShow!==!1?(c(),x(m,{key:0,type:"primary",disabled:t.disabled===!0,preIcon:t.preIcon,onClick:t.onClick},{default:u(()=>[y(z(t.label),1)]),_:2},1032,["disabled","preIcon","onClick"])):S("",!0)],64)):(c(),F(w,{key:1},[t.ifShow!==!1?(c(),x(o,{key:0,type:"primary",disabled:t.disabled===!0,preIcon:t.preIcon,onClick:t.onClick},{default:u(()=>[y(z(t.label),1)]),_:2},1032,["disabled","preIcon","onClick"])):S("",!0)],64))],64))),256)),s(M).length>0?(c(),x(ue,{key:0},{overlay:u(()=>[d(D,null,{default:u(()=>[d(g,{key:"1",onClick:ee},{default:u(()=>[d(p,{icon:"ant-design:delete-outlined"}),Me]),_:1})]),_:1})]),default:u(()=>[d(o,null,{default:u(()=>[Te,d(p,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):S("",!0)]),action:u(({record:t})=>[d(s(_e),{actions:ie(t),dropDownActions:le(t)},null,8,["actions","dropDownActions"])]),htmlSlot:u(({text:t})=>[De("div",{innerHTML:t},null,8,Ie)]),fileSlot:u(({text:t})=>[t?(c(),x(o,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download-outlined",size:"small",onClick:ae=>e.downloadFile(t)},{default:u(()=>[Re]),_:2},1032,["onClick"])):(c(),F("span",Se,"\u65E0\u6587\u4EF6"))]),_:1},8,["onRegister","rowSelection"]),d(Fe,{onRegister:s(L)},null,8,["onRegister"])])}}}));export{Mt as default};
