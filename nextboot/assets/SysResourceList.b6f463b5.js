var ce=Object.defineProperty,de=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var q=(a,l,r)=>l in a?ce(a,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[l]=r,z=(a,l)=>{for(var r in l||(l={}))me.call(l,r)&&q(a,r,l[r]);if(U)for(var r of U(l))he.call(l,r)&&q(a,r,l[r]);return a},G=(a,l)=>de(a,pe(l));var X=(a,l,r)=>new Promise((A,g)=>{var x=h=>{try{_(r.next(h))}catch(w){g(w)}},D=h=>{try{_(r.throw(h))}catch(w){g(w)}},_=h=>h.done?A(h.value):Promise.resolve(h.value).then(x,D);_((r=r.apply(a,l)).next())});import{B as fe}from"./BasicTable.18c7a455.js";import{T as _e}from"./componentMap.93bd7e90.js";import"./TableImg.ad5e6f56.js";import{a as J,u as we,bn as Ce,z as C,b9 as be,bw as Se,bj as ge,bO as B,j as f,U as y,o as u,i as F,k as b,ai as Q,p as S,G as c,N as I,a9 as ye,J as E,t as $,l as v,n as Fe,bo as xe,Q as H}from"./index.d537950e.js";import"./index.991a4e0a.js";import{u as De}from"./useListPage.3c7bec34.js";import{s as ke}from"./onlineNew.7fc4ec7d.js";import{l as Ee,c as Ae,s as P,g as Me,a as Be,_ as Ie,b as ve,d as Te}from"./SysResourceModal.f44cf76e.js";import{d as Re}from"./download.bf76ecd3.js";import"./BasicForm.b84ad685.js";import"./FormItem.vue_vue_type_script_lang.eed5af36.js";import"./BasicModal.5a168f1c.js";import"./useWindowSizeFn.5f6046fd.js";import"./useForm.41e2e211.js";import"./RadioButtonGroup.7ea12308.js";import"./useFormItem.6ac1e6ce.js";import"./JDictSelectTag.189304ea.js";import"./JUpload.864c8b30.js";import"./api.c50f6281.js";import"./functional.f108e49e.js";import"./index.dbf0b2ba.js";import"./onMountedOrActivated.b07d3039.js";import"./useContentViewHeight.6a091f7f.js";import"./FormOutlined.2279bbc3.js";import"./useSortable.23555d6d.js";import"./index.52558c64.js";import"./index.41c7be8d.js";import"./index.9904d595.js";import"./useCountdown.ad6c5821.js";import"./props.1eba571b.js";import"./Tree.vue_vue_type_style_index_0_lang.b76a1360.js";import"./useContextMenu.7a70fb68.js";import"./index.29969b1b.js";import"./index.763820e1.js";import"./htmlmixed.285f9f73.js";import"./vue.80a2a3b3.js";import"./depart.api.c3d5b637.js";import"./index.64f1a493.js";import"./EditOutlined.6870e476.js";import"./useTable.090fbe83.js";import"./render.f035f14a.js";import"./index.e3d374a0.js";import"./base64Conver.bb012c73.js";const Le=E(" \u5220\u9664 "),je=E("\u6279\u91CF\u64CD\u4F5C "),Oe=["innerHTML"],Ne={key:0,style:{"font-size":"12px","font-style":"italic"}},Ve=E("\u4E0B\u8F7D"),Xe=J({name:"system-resource-index"}),To=J(G(z({},Xe),{props:{query:{type:Object,default:{}}},setup(a,{expose:l}){const r=a;we(),Ce();const A={},g=C(null),x=C(null),D=C(null),_=C(null);be();const h=[],w=C([{label:"\u65B0\u589E",methods:"handleAdd",preIcon:"ant-design:plus-outlined",ifShowMethod:"handleAddShow"},{label:"\u5BFC\u51FA",methods:"onExportXls",preIcon:"ant-design:export-outlined",ifShowMethod:"handleExportShow"},{label:"\u5BFC\u5165",methods:"onImportXls",preIcon:"ant-design:import-outlined",btnType:"import",ifShowMethod:"handleImportShow"}]),T=C([{label:"\u7F16\u8F91",methods:"handleEdit",ifShowMethod:"handleEditShow"}]),R=C([{label:"\u8BE6\u60C5",methods:"handleDetail",ifShowMethod:"handleDetailShow"},{label:"\u5220\u9664",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u5417\uFF1F",methods:"handleDelete"},ifShowMethod:"handleDeleteShow"}]),t={handleAdd:function(){j(!0,{action:"add"})},handleEdit:function(e){j(!0,{record:e,action:"editor"})},handleAddShow:function(e){return!0},handleEditShow:function(e){return!0},handleDeleteShow:function(e){return!0},handleBatchDeleteShow:function(e){return!0},handleDetailShow:function(e){return!0},handleExportShow:function(e){return!0},handleImportShow:function(e){return!0},batchHandleDelete:function(){return X(this,null,function*(){yield ve({ids:V.value},M)})},handleDetail:function(e){j(!0,{record:e,action:"detail"})},handleDelete:function(e){return X(this,null,function*(){yield Te({id:e.id},M)})}},L=Se(),{currentRoute:K}=L,[W,{openModal:j}]=ge(),{prefixCls:He,tableContext:Y,onExportXls:Z,onImportXls:ee}=De({tableProps:{title:"\u7CFB\u7EDF\u7269\u7406\u8D44\u6E90",api:Ee,columns:Ae,canResize:!0,beforeFetch:e=>{const d=ne(),o=B({},f(K).query||{});let n=d.getFieldsValue()||{};Object.keys(n).map(m=>{n[m]?Array.isArray(n[m])&&(n[m]=n[m].join(",")):n[m]=""});const s=r.query||{},p=B(o,e,n,s);return Object.assign(e,p),Object.keys(e).map(m=>{for(let k=0;k<h.length;k++)e[h[k]]=void 0;(e[m]===""||e[m]===null)&&(e[m]=void 0)}),e},useSearchForm:!!P.length,pagination:void 0,formConfig:{schemas:P,autoSubmitOnEnter:!0,actionColOptions:{span:4,style:{textAlign:"left",paddingLeft:"10px"}},labelCol:ke,wrapperCol:{},baseColProps:null,showAdvancedButton:!(P.length<=3),autoAdvancedCol:3,autoAdvancedLine:99,alwaysShowLines:99,searchActionColIndexValue:0,searchActionColIndexesModel:"N",fieldMapToNumber:[],fieldMapToTime:[]},actionColumn:{fixed:"right",width:120}},exportConfig:{name:"\u7CFB\u7EDF\u7269\u7406\u8D44\u6E90",url:Me},importConfig:{url:Be,success:M}});t.onExportXls=Z,t.onImportXls=ee;const[oe,O,N]=Y,{reload:te,getForm:ne}=O,{rowSelection:ie,selectedRowKeys:V}=N;function re(e){e&&e.split(",").map(o=>{Re({url:xe(o)})})}function M(){(V.value=[])&&te()}function le(){return f(w).map(e=>{const d=H(e),o=d.methods;return d.onClick=()=>{t[o]&&t[o]()},d})}function se(e){return f(T).map(d=>{const o=H(d),n=o.methods,s=B({},o.popConfirm||{}),p=o.ifShowMethod;return o.ifShow=p&&t[p]?t[p](e):!0,s.methods?(s.confirm=t[s.methods]&&t[s.methods].bind(null,e),o.popConfirm=s):n&&(o.onClick=t[n]&&t[n].bind(null,e)),o})}function ae(e){return f(R).map(d=>{const o=H(d),n=o.methods,s=B({},o.popConfirm||{}),p=o.ifShowMethod;return o.ifShow=p&&t[p]?t[p](e):!0,s.methods?(s.confirm=t[s.methods]&&t[s.methods].bind(null,e),o.popConfirm=s):n&&(o.onClick=t[n]&&t[n].bind(null,e)),o})}return A["./sysResourceMixin.ts"]&&A["./sysResourceMixin.ts"].default({methods:t,actionBtns:T,dropDownActionBtns:R,titleBtns:w,tableMethods:O,selections:N,router:L,bottomComponent:g,topComponent:x,topRef:D,bottomRef:_}),l({methods:t,actionBtns:T,dropDownActionBtns:R,titleBtns:w,tableMethods:O,selections:N,router:L,bottomComponent:g,topComponent:x,topRef:D,bottomRef:_}),(e,d)=>{const o=y("j-upload-button"),n=y("a-button"),s=y("Icon"),p=y("a-menu-item"),m=y("a-menu"),k=y("a-dropdown");return u(),F("div",null,[(u(),b(Q(x.value),{ref_key:"topRef",ref:D},null,512)),S(f(fe),{onRegister:f(oe),rowSelection:f(ie)},{tableTitle:c(()=>[(u(!0),F(I,null,ye(le(),(i,ue)=>(u(),F(I,null,[i.btnType==="import"?(u(),F(I,{key:0},[i.ifShow!==!1?(u(),b(o,{key:0,type:"primary",disabled:i.disabled===!0,preIcon:i.preIcon,onClick:i.onClick},{default:c(()=>[E($(i.label),1)]),_:2},1032,["disabled","preIcon","onClick"])):v("",!0)],64)):(u(),F(I,{key:1},[i.ifShow!==!1?(u(),b(n,{key:0,type:"primary",disabled:i.disabled===!0,preIcon:i.preIcon,onClick:i.onClick},{default:c(()=>[E($(i.label),1)]),_:2},1032,["disabled","preIcon","onClick"])):v("",!0)],64))],64))),256)),f(V).length>0?(u(),b(k,{key:0},{overlay:c(()=>[S(m,null,{default:c(()=>[t.handleBatchDeleteShow?(u(),b(p,{key:"1",onClick:t.batchHandleDelete},{default:c(()=>[S(s,{icon:"ant-design:delete-outlined"}),Le]),_:1},8,["onClick"])):v("",!0)]),_:1})]),default:c(()=>[S(n,null,{default:c(()=>[je,S(s,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):v("",!0)]),action:c(({record:i})=>[S(f(_e),{actions:se(i),dropDownActions:ae(i)},null,8,["actions","dropDownActions"])]),htmlSlot:c(({text:i})=>[Fe("div",{innerHTML:i},null,8,Oe)]),fileSlot:c(({text:i})=>[i?(u(),b(n,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download-outlined",size:"small",onClick:ue=>re(i)},{default:c(()=>[Ve]),_:2},1032,["onClick"])):(u(),F("span",Ne,"\u65E0\u6587\u4EF6"))]),_:1},8,["onRegister","rowSelection"]),(u(),b(Q(g.value),{ref_key:"bottomRef",ref:_},null,512)),S(Ie,{onRegister:f(W),onSuccess:M},null,8,["onRegister"])])}}}));export{To as default};
