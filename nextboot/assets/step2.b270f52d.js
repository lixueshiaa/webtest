var g=(e,s,t)=>new Promise((f,r)=>{var c=o=>{try{a(t.next(o))}catch(m){r(m)}},p=o=>{try{a(t.throw(o))}catch(m){r(m)}},a=o=>o.done?f(o.value):Promise.resolve(o.value).then(c,p);a((t=t.apply(e,s)).next())});import{a as F,K as _,F as v,I,z as b,B as P,c as k,a4 as y,Q as B,a1 as C,T as D,U as d,o as S,k as j,G as u,p as n,J as h}from"./index.6cf4d174.js";import{S as z}from"./index.260e697f.js";import{a as E,b as M}from"./useLogin.779b010b.js";const R=F({name:"step2",components:{Button:_,Form:v,FormItem:v.Item,InputPassword:I.Password,Input:I,StrengthMeter:z},props:{accountInfo:{type:Object,default:()=>({})}},emits:["prevStep","nextStep"],setup(e,{emit:s}){const{t}=k(),{createErrorModal:f}=D(),{accountInfo:r}=e,c=b(),p=P({username:r.obj.username||"",password:"",confirmPassword:""}),{getFormRules:a}=E(p),{validForm:o}=M(c);function m(){s("prevStep",r.obj)}function w(){return g(this,null,function*(){const i=yield o();if(!i)return;const l=yield y(B({username:i.username,password:i.password,smscode:r.obj.smscode,phone:r.obj.phone}));l.success?s("nextStep",r.obj):f({title:t("sys.api.errorTip"),content:l.message||t("sys.api.networkExceptionMsg")})})}return{t,formRef:c,formData:p,getFormRules:a,handleNext:w,handlePrev:m}}}),N=h(" \u4E0A\u4E00\u6B65 "),T=h(" \u4E0B\u4E00\u6B65 ");function U(e,s,t,f,r,c){const p=d("Input"),a=d("FormItem"),o=d("StrengthMeter"),m=d("InputPassword"),w=d("Button"),i=d("Form");return S(),j(i,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef"},{default:u(()=>[n(a,{name:"username",class:"enter-x"},{default:u(()=>[n(p,{size:"large",value:e.formData.username,"onUpdate:value":s[0]||(s[0]=l=>e.formData.username=l),placeholder:e.t("sys.login.userName"),disabled:""},null,8,["value","placeholder"])]),_:1}),n(a,{name:"password",class:"enter-x"},{default:u(()=>[n(o,{size:"large",value:e.formData.password,"onUpdate:value":s[1]||(s[1]=l=>e.formData.password=l),placeholder:e.t("sys.login.password")},null,8,["value","placeholder"])]),_:1}),n(a,{name:"confirmPassword",class:"enter-x"},{default:u(()=>[n(m,{size:"large",visibilityToggle:"",value:e.formData.confirmPassword,"onUpdate:value":s[2]||(s[2]=l=>e.formData.confirmPassword=l),placeholder:e.t("sys.login.confirmPassword")},null,8,["value","placeholder"])]),_:1}),n(a,{class:"enter-x"},{default:u(()=>[n(w,{type:"primary",size:"large",block:"",onClick:e.handlePrev},{default:u(()=>[N]),_:1},8,["onClick"]),n(w,{size:"large",block:"",class:"mt-4",onClick:e.handleNext},{default:u(()=>[T]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])}var G=C(R,[["render",U]]);export{G as default};
