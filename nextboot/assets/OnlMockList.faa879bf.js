var lt=Object.defineProperty,rt=Object.defineProperties;var at=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var ct=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable;var X=(a,s,i)=>s in a?lt(a,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[s]=i,U=(a,s)=>{for(var i in s||(s={}))ct.call(s,i)&&X(a,i,s[i]);if(N)for(var i of N(s))ut.call(s,i)&&X(a,i,s[i]);return a},V=(a,s)=>rt(a,at(s));var v=(a,s,i)=>new Promise((x,k)=>{var w=o=>{try{_(i.next(o))}catch(b){k(b)}},y=o=>{try{_(i.throw(o))}catch(b){k(b)}},_=o=>o.done?x(o.value):Promise.resolve(o.value).then(w,y);_((i=i.apply(a,s)).next())});import{B as pt}from"./BasicTable.1032ab26.js";import{T as dt}from"./componentMap.6942b0b6.js";import"./TableImg.39540c6d.js";import"./index.9788db2e.js";import{u as mt}from"./useListPage.b997c0e2.js";import{l as ht,c as ft,s as q,g as _t,a as bt,_ as gt,d as Ct,b as kt}from"./OnlMockModal.2db91d17.js";import{a as H,u as wt,bn as yt,z as R,bw as Ft,bj as St,j as d,bO as j,U as g,o as m,i as C,p as f,G as c,N as B,a9 as xt,k as E,J as S,t as z,l as O,n as Mt,bo as Bt,Q as L}from"./index.9eb451d3.js";import{d as Et}from"./download.de7e8375.js";import"./BasicForm.d1b5a4f4.js";import"./FormItem.vue_vue_type_script_lang.1dbd23cc.js";import"./BasicModal.a7306b6e.js";import"./useWindowSizeFn.ed181042.js";import"./useForm.26fd4105.js";import"./RadioButtonGroup.6d9641c3.js";import"./useFormItem.b38dda7e.js";import"./JDictSelectTag.3b1f5a5e.js";import"./JUpload.38683df0.js";import"./api.632a718d.js";import"./functional.8b995981.js";import"./index.83e82d5a.js";import"./onMountedOrActivated.bab7e2a6.js";import"./useContentViewHeight.0d594355.js";import"./FormOutlined.22ab579b.js";import"./useSortable.043e591f.js";import"./index.5df19bc8.js";import"./index.509a06e4.js";import"./index.dd61c578.js";import"./useCountdown.71e244f9.js";import"./props.d56cca40.js";import"./Tree.vue_vue_type_style_index_0_lang.1f840683.js";import"./useContextMenu.27080093.js";import"./index.e63dfd63.js";import"./index.c61598b5.js";import"./htmlmixed.95cdf531.js";import"./vue.e841ff5e.js";import"./depart.api.03e31315.js";import"./index.5fc45d81.js";import"./EditOutlined.1cd3ad58.js";import"./useTable.44d02b40.js";import"./render.9a5e321f.js";import"./index.e3d374a0.js";import"./base64Conver.bb012c73.js";const Dt=S(" \u5220\u9664 "),It=S("\u6279\u91CF\u64CD\u4F5C "),Tt=["innerHTML"],At={key:0,style:{"font-size":"12px","font-style":"italic"}},vt=S("\u4E0B\u8F7D"),Rt=H({name:"onlMock-onlMock"}),Mo=H(V(U({},Rt),{props:{query:{type:Object,default:{}}},setup(a,{expose:s}){const i=a;wt(),yt();const x={},k=[],w=R([{label:"\u65B0\u589E",methods:"handleAdd",preIcon:"ant-design:plus-outlined"},{label:"\u5BFC\u51FA",methods:"onExportXls",preIcon:"ant-design:export-outlined"},{label:"\u5BFC\u5165",methods:"onImportXls",preIcon:"ant-design:import-outlined",btnType:"import"}]),y=R([{label:"\u7F16\u8F91",methods:"handleEdit"}]),_=R([{label:"\u8BE6\u60C5",methods:"handleDetail"},{label:"\u5220\u9664",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u5417\uFF1F",methods:"handleDelete"}}]),o={handleAdd:function(){D(!0,{action:"add"})},handleEdit:function(t){D(!0,{record:t,action:"editor"})},handleDetail:function(t){D(!0,{record:t,action:"detail"})},handleDelete:function(t){return v(this,null,function*(){yield Ct({id:t.id},M)})}},b=Ft(),{currentRoute:P}=b,[G,{openModal:D}]=St(),{prefixCls:jt,tableContext:Q,onExportXls:$,onImportXls:J}=mt({tableProps:{title:"\u524D\u7AEFmock",api:ht,columns:ft,canResize:!0,beforeFetch:t=>{const u=Y(),e=d(P).query||{};let l=u.getFieldsValue();Object.keys(l).map(h=>{l[h]||(l[h]="")});const r=i.query||{},p=j(e,t,l,r);return Object.assign(t,p),Object.keys(t).map(h=>{for(let F=0;F<k.length;F++)t[k[F]]=void 0;(t[h]===""||t[h]===null)&&(t[h]=void 0)}),t},useSearchForm:!!q.length,formConfig:{labelWidth:120,schemas:q,autoSubmitOnEnter:!0,showAdvancedButton:!0,fieldMapToNumber:[],fieldMapToTime:[]},actionColumn:{fixed:"right",width:120}},exportConfig:{name:"\u524D\u7AEFmock",url:_t},importConfig:{url:bt,success:M}});o.onExportXls=$,o.onImportXls=J;const[K,I,T]=Q,{reload:W,getForm:Y}=I,{rowSelection:Z,selectedRowKeys:A}=T;function tt(t){t&&t.split(",").map(e=>{Et({url:Bt(e)})})}function ot(){return v(this,null,function*(){yield kt({ids:A.value},M)})}function M(){(A.value=[])&&W()}function et(){return d(w).map(t=>{const u=L(t),e=u.methods;return u.onClick=()=>{o[e]&&o[e]()},u})}function nt(t){return d(y).map(u=>{const e=L(u),l=e.methods,r=j({},e.popConfirm||{}),p=e.ifShowMethod;return e.ifShow=p&&o[p]?o[p](t):!0,r.methods?(r.confirm=o[r.methods]&&o[r.methods].bind(null,t),e.popConfirm=r):l&&(e.onClick=o[l]&&o[l].bind(null,t)),e})}function it(t){return d(_).map(u=>{const e=L(u),l=e.methods,r=j({},e.popConfirm||{}),p=e.ifShowMethod;return e.ifShow=p&&o[p]?o[p](t):!0,r.methods?(r.confirm=o[r.methods]&&o[r.methods].bind(null,t),e.popConfirm=r):l&&(e.onClick=o[l]&&o[l].bind(null,t)),e})}return x["./onlMockMixin.ts"]&&x["./onlMockMixin.ts"].default({methods:o,actionBtns:y,dropDownActionBtns:_,titleBtns:w,tableMethods:I,selections:T,router:b}),s({methods:o,actionBtns:y,dropDownActionBtns:_,titleBtns:w,tableMethods:I,selections:T,router:b}),(t,u)=>{const e=g("j-upload-button"),l=g("a-button"),r=g("Icon"),p=g("a-menu-item"),h=g("a-menu"),F=g("a-dropdown");return m(),C("div",null,[f(d(pt),{onRegister:d(K),rowSelection:d(Z)},{tableTitle:c(()=>[(m(!0),C(B,null,xt(et(),(n,st)=>(m(),C(B,null,[n.btnType==="import"?(m(),C(B,{key:0},[n.ifShow!==!1?(m(),E(e,{key:0,type:"primary",disabled:n.disabled===!0,preIcon:n.preIcon,onClick:n.onClick},{default:c(()=>[S(z(n.label),1)]),_:2},1032,["disabled","preIcon","onClick"])):O("",!0)],64)):(m(),C(B,{key:1},[n.ifShow!==!1?(m(),E(l,{key:0,type:"primary",disabled:n.disabled===!0,preIcon:n.preIcon,onClick:n.onClick},{default:c(()=>[S(z(n.label),1)]),_:2},1032,["disabled","preIcon","onClick"])):O("",!0)],64))],64))),256)),d(A).length>0?(m(),E(F,{key:0},{overlay:c(()=>[f(h,null,{default:c(()=>[f(p,{key:"1",onClick:ot},{default:c(()=>[f(r,{icon:"ant-design:delete-outlined"}),Dt]),_:1})]),_:1})]),default:c(()=>[f(l,null,{default:c(()=>[It,f(r,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):O("",!0)]),action:c(({record:n})=>[f(d(dt),{actions:nt(n),dropDownActions:it(n)},null,8,["actions","dropDownActions"])]),htmlSlot:c(({text:n})=>[Mt("div",{innerHTML:n},null,8,Tt)]),fileSlot:c(({text:n})=>[n?(m(),E(l,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download-outlined",size:"small",onClick:st=>tt(n)},{default:c(()=>[vt]),_:2},1032,["onClick"])):(m(),C("span",At,"\u65E0\u6587\u4EF6"))]),_:1},8,["onRegister","rowSelection"]),f(gt,{onRegister:d(G),onSuccess:M},null,8,["onRegister"])])}}}));export{Mo as default};
