var b=Object.defineProperty;var f=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var g=(e,t,o)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,h=(e,t)=>{for(var o in t||(t={}))B.call(t,o)&&g(e,o,t[o]);if(f)for(var o of f(t))P.call(t,o)&&g(e,o,t[o]);return e};var m=(e,t,o)=>new Promise((c,l)=>{var d=s=>{try{n(o.next(s))}catch(a){l(a)}},p=s=>{try{n(o.throw(s))}catch(a){l(a)}},n=s=>s.done?c(s.value):Promise.resolve(s.value).then(d,p);n((o=o.apply(e,t)).next())});import{B as F}from"./index.9788db2e.js";import{B as w}from"./BasicForm.d1b5a4f4.js";import"./componentMap.6942b0b6.js";import{u as A}from"./useForm.26fd4105.js";import"./RadioButtonGroup.6d9641c3.js";import{a0 as u,bR as C,a as x,z as E,bg as I,j as r,f as k,o as D,k as M,G as R,p as v,ad as T}from"./index.9eb451d3.js";import"./JDictSelectTag.3b1f5a5e.js";import"./JUpload.38683df0.js";import{r as S}from"./validator.cd75231b.js";const Q="/sys/position/exportXls",Y="/sys/position/importExcel",Z=e=>u.get({url:"/sys/position/list",params:e}),U=(e,t)=>{let o=t?"/sys/position/edit":"/sys/position/add";return u.post({url:o,params:e})},j=e=>u.get({url:"/sys/position/queryById",params:e}),ee=(e,t)=>u.delete({url:"/sys/position/delete",data:e},{joinParamsToUrl:!0}).then(()=>{t()}),te=(e,t)=>{C.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u6570\u636E",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:()=>u.delete({url:"/sys/position/deleteBatch",data:e},{joinParamsToUrl:!0}).then(()=>{t()})})},oe=[{title:"\u804C\u52A1\u7F16\u7801",dataIndex:"code",width:200,align:"left"},{title:"\u804C\u52A1\u540D\u79F0",dataIndex:"name",width:200},{title:"\u804C\u52A1\u7B49\u7EA7",dataIndex:"postRank_dictText",width:100}],se=[{field:"name",label:"\u804C\u52A1\u540D\u79F0",component:"JInput",colProps:{span:8}}],O=[{label:"\u4E3B\u952E",field:"id",component:"Input",show:!1},{label:"\u804C\u7EA7",field:"postRank",component:"JDictSelectTag",required:!0,componentProps:{dictCode:"position_rank",dropdownStyle:{maxHeight:"100vh"}}},{field:"name",label:"\u804C\u52A1\u540D\u79F0",component:"Input",required:!0},{field:"code",label:"\u804C\u52A1\u7F16\u7801",component:"Input",required:!0,dynamicDisabled:({values:e})=>!!e.id,dynamicRules:({model:e,schema:t})=>S.duplicateCheckRule("sys_position","code",e,t,!0)}],q=x({__name:"PositionModal",emits:["success","register"],setup(e,{emit:t}){const o=E(!0),[c,{resetFields:l,setFieldsValue:d,validate:p}]=A({labelWidth:150,schemas:O,showActionButtonGroup:!1}),[n,{setModalProps:s,closeModal:a}]=I(i=>m(this,null,function*(){yield l(),s({confirmLoading:!1}),o.value=!!(i!=null&&i.isUpdate),r(o)&&(i.record=yield j({id:i.record.id}),yield d(h({},i.record)))})),y=k(()=>r(o)?"\u7F16\u8F91\u804C\u52A1":"\u65B0\u589E\u804C\u52A1");function _(){return m(this,null,function*(){try{const i=yield p();s({confirmLoading:!0}),yield U(i,o.value),a(),t("success")}finally{s({confirmLoading:!1})}})}return(i,L)=>(D(),M(r(F),T(i.$attrs,{onRegister:r(n),title:r(y),onOk:_,width:700}),{default:R(()=>[v(r(w),{onRegister:r(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});var ie=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{ie as P,q as _,Q as a,Y as b,oe as c,ee as d,te as e,Z as g,se as s};
