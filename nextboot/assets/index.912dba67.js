import k from"./CollapseItem.df428bfb.js";import R from"./FormComponentPanel.211b9bed.js";import j from"./JsonModal.2b1179d1.js";import V from"./index.1d39129d.js";import N from"./useForm.f06f9b19.js";import q from"./Toolbar.7592e5fd.js";import Q from"./PropsPanel.a02d7c00.js";import U from"./ImportJsonModal.fac58aa6.js";import X from"./CodeModal.b7744441.js";import"./htmlmixed.d0c2a650.js";import{a1 as Y,a as Z,b as ee,z as a,e_ as oe,b5 as c,o as te,i as re,p as n,G as i,j as s,e$ as K,r as B,dS as F,f0 as ne,a8 as se,a9 as le,aa as ae,ab as ie,ac as me,dk as pe,N as ue,ag as f}from"./index.397c0bf9.js";import{g,f as de}from"./index.18447f3a.js";import{b as ce,c as fe,l as ve}from"./formItemConfig.ab109f93.js";import{g as he}from"./formItemPropsConfig.5c2ef332.js";import"./vuedraggable.umd.c15ea3ba.js";import"./LayoutItem.2789b0db.js";import"./FormNode.714750e3.js";import"./FormNodeOperate.742ec0d9.js";import"./useFormDesignState.e3d1405e.js";import"./index.69e50d93.js";import"./PreviewCode.09042379.js";import"./index.0ae2a8d1.js";import"./useWindowSizeFn.830b179a.js";import"./index.cbe8218e.js";import"./FormRender.767e3e60.js";import"./BasicForm.3d2570da.js";import"./FormItem.vue_vue_type_script_lang.17542945.js";import"./componentMap.b6eed178.js";import"./index.1ddf0867.js";import"./useFormItem.3d0c36d5.js";import"./RadioButtonGroup.c6ce22c0.js";import"./index.7ab28a2b.js";import"./BasicModal.1ff6964e.js";import"./download.2b828441.js";import"./base64Conver.bb012c73.js";import"./index.4874795c.js";import"./index.de31474f.js";import"./useCountdown.31522075.js";import"./api.2a8d49a5.js";import"./props.12587afd.js";import"./JDictSelectTag.67e5d4c9.js";import"./Tree.vue_vue_type_style_index_0_lang.3391c5ca.js";import"./useContextMenu.7724d5f8.js";import"./index.a1e3eaae.js";import"./onMountedOrActivated.752d8da8.js";import"./index.efede30e.js";import"./vue.651b9432.js";import"./depart.api.d716bbdd.js";import"./JUpload.9a731a32.js";import"./functional.540b215d.js";import"./index.4e16446b.js";import"./EditOutlined.91a9672d.js";import"./useForm.871d18c5.js";import"./FormProps.6a47f584.js";import"./FormItemProps.e0e9c8c7.js";import"./RuleProps.9c9d8bd6.js";import"./ComponentProps.bd50f5ac.js";import"./FormOptions.4779556e.js";import"./FormItemColumnProps.4e83db34.js";import"./index.97ba0272.js";const ye=Z({__name:"index",props:{title:{type:String,default:"v-form-antd\u8868\u5355\u8BBE\u8BA1\u5668"}},setup(ge){const{prefixCls:b}=ee("form-design"),z=a(null),A=a(null),I=a(null),M=a(null),w=a(null),L=a(null),S=a({}),t=a({schemas:[],layout:"horizontal",labelLayout:"flex",labelWidth:100,labelCol:{},wrapperCol:{},currentItem:{component:"",componentProps:{}},activeKey:1}),J=o=>{o.schemas=o.schemas||[],o.schemas.forEach(e=>{e.colProps=e.colProps||{span:24},e.componentProps=e.componentProps||{},e.itemProps=e.itemProps||{}}),t.value=o},D=oe(t,{deep:!0,capacity:20,parse:o=>{const e=f(o),{currentItem:r,schemas:l}=e,d=l&&l.find(m=>m.key===(r==null?void 0:r.key));return d&&(e.currentItem=d),e}}),p=o=>{t.value.currentItem=o,W(o.key?t.value.activeKey===1?2:t.value.activeKey:1)},$=o=>{o.colProps=o.colProps||{},o.colProps.span=he.span},v=(o,e)=>{},P=o=>{const e=f(o);return $(e),g(e),e},h=o=>{var r;const e=f(o);if($(e),g(e),!((r=t.value.currentItem)!=null&&r.key)){p(e),t.value.schemas&&t.value.schemas.push(e);return}E(e,!1)},T=o=>{const e=f(o);return e.component==="Grid"&&de([o],r=>{g(r)}),e},E=(o=t.value.currentItem,e=!0)=>{var d;const r=(d=t.value.currentItem)==null?void 0:d.key,l=m=>{m.some((y,C)=>{var x;if(y.key===r){e?m.splice(C,0,T(y)):m.splice(C+1,0,o);const _={newIndex:C+1};return H(_,m,e),!0}["Grid","Tabs"].includes(y.component)&&((x=y.columns)==null||x.forEach(_=>{l(_.children)}))})};t.value.schemas&&l(t.value.schemas)},H=({newIndex:o},e,r=!1)=>{const l=e[o];r&&g(l),p(l)},u=o=>{const e=f(t.value);o==null||o.showModal(e)},W=o=>{t.value.activeKey=o},G=()=>{t.value.schemas=[],p({component:""})},O=(o,e)=>S.value[o]=e;return c("formModel",S),c("setFormModelMethod",O),c("formConfig",t),c("historyReturn",D),c("formDesignMethods",{handleBeforeColAdd:H,handleCopy:E,handleListPush:h,handleSetSelectItem:p,handleAddAttrs:v,setFormConfig:J}),(o,e)=>(te(),re(ue,null,[n(s(pe),{style:{height:"100%"}},{default:i(()=>[n(s(K),{class:B(`left ${s(b)}-sider`),collapsible:"",collapsedWidth:"0",width:"270",zeroWidthTriggerStyle:{"margin-top":"-70px","background-color":"gray"},breakpoint:"md"},{default:i(()=>[n(s(F),{title:"\u57FA\u7840\u63A7\u4EF6"},{default:i(()=>[n(k,{list:s(ce),handleListPush:P,onAddAttrs:v,onHandleListPush:h},null,8,["list"])]),_:1}),n(s(F),{title:"\u81EA\u5B9A\u4E49\u63A7\u4EF6"},{default:i(()=>[n(k,{list:s(fe),onAddAttrs:v,handleListPush:P,onHandleListPush:h},null,8,["list"])]),_:1}),n(s(F),{title:"\u5E03\u5C40\u63A7\u4EF6"},{default:i(()=>[n(k,{list:s(ve),handleListPush:P,onAddAttrs:v,onHandleListPush:h},null,8,["list"])]),_:1})]),_:1},8,["class"]),n(s(ne),null,{default:i(()=>[n(q,{onHandleOpenJsonModal:e[0]||(e[0]=r=>u(A.value)),onHandleOpenImportJsonModal:e[1]||(e[1]=r=>u(I.value)),onHandlePreview:e[2]||(e[2]=r=>u(M.value)),onHandlePreview2:e[3]||(e[3]=r=>u(w.value)),onHandleOpenCodeModal:e[4]||(e[4]=r=>u(L.value)),onHandleClearFormItems:G}),n(R,{"current-item":t.value.currentItem,data:t.value,onHandleSetSelectItem:p},null,8,["current-item","data"])]),_:1}),n(s(K),{class:B(`right ${s(b)}-sider`),collapsible:"",reverseArrow:!0,collapsedWidth:"0",width:"270",zeroWidthTriggerStyle:{"margin-top":"-70px","background-color":"gray"},breakpoint:"lg"},{default:i(()=>[n(Q,{ref_key:"propsPanel",ref:z,activeKey:t.value.activeKey},se({_:2},[le(t.value.schemas,r=>({name:`${r.component}Props`,fn:i(l=>[ae(o.$slots,`${r.component}Props`,ie(me({formItem:l,props:l.componentProps})),void 0,!0)])}))]),1032,["activeKey"])]),_:3},8,["class"])]),_:3}),n(j,{ref_key:"jsonModal",ref:A},null,512),n(X,{ref_key:"codeModal",ref:L},null,512),n(U,{ref_key:"importJsonModal",ref:I},null,512),n(V,{ref_key:"eFormPreview",ref:M,formConfig:t.value},null,8,["formConfig"]),n(N,{ref_key:"eFormPreview2",ref:w,formConfig:t.value},null,8,["formConfig"])],64))}});var Io=Y(ye,[["__scopeId","data-v-12fd1f97"]]);export{Io as default};
