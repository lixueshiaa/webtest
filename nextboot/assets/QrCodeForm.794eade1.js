import y from"./LoginFormTitle.eddad535.js";import{a as I,z as f,c as L,y as Q,f as g,j as t,X as w,o as T,i as B,p as o,n as N,G as p,J as _,t as k,L as q,K as V,N as j,l as D,Y as E,Z as b}from"./index.9eb451d3.js";import{Q as z}from"./index.22c155b2.js";import{u as F,L as U}from"./useLogin.85c1f394.js";import"./download.de7e8375.js";import"./base64Conver.bb012c73.js";const G={class:"enter-x min-w-64 min-h-64"},$=I({__name:"QrCodeForm",setup(J){const c=f("");let n;const{t:s}=L(),v=Q(),{handleBackLogin:C,getLoginState:h}=F(),a=f("0"),i=g(()=>t(h)===U.QR_CODE),x=g(()=>t(a)==="0"?s("sys.login.scanSign"):s("sys.login.scanSuccess"));function l(){a.value="0",E().then(e=>{c.value=e.qrcodeId,e.qrcodeId&&S(e.qrcodeId)})}function u(e){b({qrcodeId:e}).then(r=>{let d=r.token;d=="-2"&&(l(),clearInterval(n)),r.success&&(a.value="2",clearInterval(n),setTimeout(()=>{v.qrCodeLogin(d)},500))})}function S(e){u(e),m(),n=setInterval(()=>{u(e)},1500)}function m(){n&&clearInterval(n)}return w(i,e=>{e?l():m()}),(e,r)=>t(i)?(T(),B(j,{key:0},[o(y,{class:"enter-x"}),N("div",G,[o(t(z),{value:c.value,class:"enter-x flex justify-center xl:justify-start",width:280},null,8,["value"]),o(t(q),{class:"enter-x"},{default:p(()=>[_(k(t(x)),1)]),_:1}),o(t(V),{size:"large",block:"",class:"mt-4 enter-x",onClick:t(C)},{default:p(()=>[_(k(t(s)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])])],64)):D("",!0)}});export{$ as default};
